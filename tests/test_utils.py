import unittest
from chrome_web_store_scraper.utils import script_text_to_json, format_script_data
from chrome_web_store_scraper.utils import load_manifest, is_manifest_valid

class TestUtils(unittest.TestCase):
    def setUp(self):
        self.maxDiff = None

    def test_script_text_to_json(self):
        script_text = 'AF_initDataCallback({key: \'ds:0\', hash: \'2\', data:[["nllcnknpjnininklegdoijpljgdjkijc","https://lh3.googleusercontent.com/u6vAjFVGNe_rMEaHitlgzea-XtilYUbb6KvWL2TjxUXeoUYMlVUNiwawiyPjUMQSYktWyc6QDBfFvqY5ergeTn2IqQ","Wordtune: Generative AI productivity platform",4.619027661357921,2386,"https://lh3.googleusercontent.com/2huOPk4yAIyNFMvSF2vq1XtDolNH8db_cI_x5adgamPE_soavBrQqBmeD2ZpwEZqtETZ6pJPTa5XUVF5onG5xHfn","Unleash your professional potential with Wordtune\'s GenAI tools for work.","wordtune.com",true,true,null,["productivity/workflow",null,4],1,true,1000000,true],null,null,null,null,[[1,"https://lh3.googleusercontent.com/mxlFMKwQQ9GCTRfr6pJ0qASX52lFD0km05WLVpD7lslBXMKdeNnnfQr5c148ucEjctkFgGr3WKvU3jZSx2OzzCiN"],[1,"https://lh3.googleusercontent.com/7EhbuCkFih0BTfpZL6FWnJvABK2IFOyzZirVt7aZJDUScxBtz0f_GLB_LNfn2sp5_lWt0E5iiS5xvQaoCIOH7bQDiQ"],[1,"https://lh3.googleusercontent.com/nuDyCh_E7u5KxSObu89PRkH9tE9YL_S-Zje6WrdC_Cdw3KIuDb3K8Ai3ZdZhajQnO4vP3cjFvKxvvduHv3DU7aLbfDI"],[1,"https://lh3.googleusercontent.com/FIZE3yDBWweOm3EQ9OnXynuAPkaNbB7olSRjEccggQic3aomhTlIRjoeDc2iV69TqlDPNsU-uCIFCz75xY-yikprVA"]],"Busy professionals have tons of work to get through. Some accept the frustration while others choose Wordtune to speed up their tasks. \\n\\nWordtune is a Generative AI platform for work productivity. By using reliable Generative AI, professionals from all fields can grow their careers and stand out at work. Whether you’re writing emails, creating documents or sending instant messages to colleagues or clients, Wordtune perfects your writing while streamlining your work using AI. \\n\\nTake your productivity to new heights with the Wordtune Chrome extension — available on all your favorite websites and web apps. \\n\\nWordtune’s latest and and most advanced set of GenAI tools for work include: \\n\\n➡️ Rewrite: Perfect your writing with Wordtune Rewrite — from a single word to an entire page.\\n\\n➡️ Summarization: Cut reading and watching time in half by summarizing YouTube videos, blog articles, PDFs and more. \\n\\n➡️ AI writing: Enhance your productivity by writing faster with AI suggestions — all while remaining true to your unique style.\\n\\n➡️ Corrections and recommendations: Write like the professional you are with AI recommendations. Unleash your thoughts without worrying about grammar or spelling mistakes.\\n\\n➡️ Smart translation: Choose from 10 languages to Smart translate to English. \\n\\n➡️ Tones and length: Make sure your message hits the right note — change your tone from professional to casual in just a click. Effortlessly reduce or increase word count depending on your needs. \\n\\nUse the Wordtune anywhere you need it: Whether you\'re on your desktop, mobile device or using your favorite apps, Wordtune is there for you.\\n\\nWe’re constantly working on updates and improvements to make your Wordtune experience even better. If you have questions or feedback, we would love to hear from you at help@wordtune.com.",[1,5,9],true,1,["help@wordtune.com","124 Ibn Gabirol St.\\nTel Aviv 6203854\\nIL",null,true,null,"Wordtune",null,"AI21 Labs Ltd."],null,null,"6.0.2",[1712055462,326089000],"16.65MiB",["English"],null,null,null,"{\\n\\"update_url\\": \\"https://clients2.google.com/service/update2/crx\\",\\n\\"manifest_version\\":2,\\"name\\":\\"Wordtune: Generative AI productivity platform\\",\\"version\\":\\"6.0.2\\",\\"description\\":\\"Unleash your professional potential with Wordtune\'s GenAI tools for work.\\",\\"icons\\":{\\"48\\":\\"media/logo-48.png\\",\\"128\\":\\"media/logo-128.png\\"},\\"background\\":{\\"scripts\\":[\\"background.js\\"],\\"persistent\\":false},\\"content_scripts\\":[{\\"matches\\":[\\"\\u003call_urls\\u003e\\"],\\"js\\":[\\"bundles/writingMonitor.js\\"],\\"run_at\\":\\"document_idle\\",\\"all_frames\\":true,\\"css\\":[]},{\\"all_frames\\":false,\\"js\\":[\\"bundles/enableCanvasAnnotations.js\\"],\\"matches\\":[\\"*://docs.google.com/document/*\\"],\\"run_at\\":\\"document_start\\"},{\\"all_frames\\":false,\\"js\\":[\\"bundles/injectExtensionInstalled.js\\"],\\"matches\\":[\\"\\u003call_urls\\u003e\\"],\\"run_at\\":\\"document_start\\"},{\\"all_frames\\":false,\\"js\\":[\\"bundles/overrideCanvas.js\\"],\\"matches\\":[\\"*://docs.google.com/document/*\\"],\\"run_at\\":\\"document_end\\"},{\\"matches\\":[\\"\\u003call_urls\\u003e\\"],\\"all_frames\\":true,\\"js\\":[\\"bundles/content.js\\"],\\"run_at\\":\\"document_end\\",\\"css\\":[\\"fonts/fonts.css\\"]},{\\"matches\\":[\\"\\u003call_urls\\u003e\\"],\\"js\\":[\\"read/content.js\\"],\\"all_frames\\":false,\\"css\\":[\\"read/media/OpenSans.css\\",\\"read/media/SofiaPro.css\\"]}],\\"browser_action\\":{\\"default_popup\\":\\"html/popup.html\\"},\\"minimum_chrome_version\\":\\"77\\",\\"permissions\\":[\\"alarms\\",\\"cookies\\",\\"storage\\",\\"*://*/*\\",\\"https://*.wordtune.com/*\\"],\\"optional_permissions\\":[\\"clipboardRead\\",\\"clipboardWrite\\"],\\"web_accessible_resources\\":[\\"media/*.png\\",\\"assets/*.png\\",\\"assets/*.eot\\",\\"assets/*.woff\\",\\"assets/*.woff2\\",\\"assets/*.ttf\\",\\"assets/*.svg\\",\\"assets/*.gif\\",\\"fonts/Inter/*.woff\\",\\"fonts/Inter/*.woff2\\",\\"html/*.html\\",\\"media/webFonts/*.woff\\",\\"media/webFonts/*.woff2\\",\\"read/media/*.woff\\",\\"read/media/*.woff2\\",\\"read/media/*.css\\"],\\"content_security_policy\\":\\"script-src \'self\' https://www.gstatic.com/ https://*.firebaseio.com https://www.googleapis.com; object-src \'self\'\\",\\"externally_connectable\\":{\\"matches\\":[\\"https://app.wordtune.com/*\\",\\"https://www.wordtune.com/*\\"]}}",true,[["npnbdojkgkbcdfdjlfdmplppdphlhhcf","https://lh3.googleusercontent.com/GHv0Lq9Nb_wxNonJFV0OqInUqhQaTUC1whZ8iQvhWkOs3Bjz7Prv0LtXMIBGBNdfAYdv5GG7ERjX4iug1e4b2qF6Aw","ProWritingAid: Grammar Checker \\u0026 Paraphrasing Tool",4.837947755357423,6393,"https://lh3.googleusercontent.com/2hsQ22tpU5fgLoUAiTNzc1iSBu6e3LR7OnQoBuaJHAVMkmsN1uSjAZtew7nO0NdpkbyGu91lf1SQ3630b17WDEeSCQ","Gain confidence in your writing with the best grammar checker and paraphrasing tool that works wherever you do.","www.prowritingaid.com",true,true,null,["productivity/workflow",null,4],1,true,300000,true],["cpnnabpklgnhjopaenljbbmkejamagel","https://lh3.googleusercontent.com/8kQwFC0s0cK-pfJhXVl-nLh8-KdbSWK3D3ZwJ7r1IQgXZU3P_Swprmwpw8wMMm-FaHpGz4McgBt42MqGcZbbZeVj","Rytr - AI powered writing assistant",3.933333333333333,30,null,"Best AI Writer, Content Generator \\u0026 Writing Assistant.","rytr.me",true,true,null,["productivity/education",null,6],1,true,50000,true],["ieidddkeimflpkghaodhddcmlclcliaa","https://lh3.googleusercontent.com/7GtxXkDgVr6JKdxJLFvxViz08cldXPITCsayqBxMsWMgcl99MxokJfwveQj57Ws_fnt6qvVjXFQ_T5m8uWtsVDg2","ParagraphAI - Write Better, Faster",4.333333333333333,60,"https://lh3.googleusercontent.com/JH2nNh8Sr44Ox_1DXuqp1yXTzrIvXolC2FFrChCJW7tDQwKH0h5IJp2OM6XP5VR4cKbeCbrgIHb7pQM561lyVY6KjA","ParagraphAI is an AI-powered writing tool that crafts perfectly curated content for all your writing needs.","paragraphai.com",true,true,null,["productivity/communication",null,3],1,true,40000,true],["hngnkmianenpifegfoggnkamjnffiobn","https://lh3.googleusercontent.com/hoJxHmFFy8E0-OgAjZOpKe1FGRTWh7vmgRcga8YUhN-vgBaUpyphAdWuB9UmfE3xcAtzLAweRbmnfiu8vEoIPar43AA","Writer: Generative AI",4.403225806451613,62,"https://lh3.googleusercontent.com/JL8YGdaVDzh81Yybs77yJzwgKn4ewHuUnY0fuLN__kPOUiNTzbwwQM5s31PEEgJJZitJQc3tEaUdcQbkaUEbDfrfug","Generative AI in all the places you work","writer.com",true,true,null,["productivity/workflow",null,4],1,true,100000,true],["kljjoeapehcmaphfcjkmbhkinoaopdnd","https://lh3.googleusercontent.com/roLFXs4GSKTU5tAe2MPKk0PwI-CugDF9i3uNN2m4GvyCCJAekXiTqGBqoFL3Yvy0HRYxPbhyPLVfmZj51dNHbTJpYA","HyperWrite - AI Assistant",4.376344086021505,93,"https://lh3.googleusercontent.com/sLiNBc8Yk0lC-_6U4rHyDeUZVm5wJVcQCYdW-AH7LNhk1w5z-WYNFHJcM0wLfYm7Bv8LOjiLQWgPgKcKn70oMOw4Jg","Personal Assistant by HyperWrite is the first AI agent that can operate your browser. It\'s like self-driving mode for the web.","hyperwriteai.com",true,true,null,["productivity/workflow",null,4],1,true,100000,true],["hkfhclakgkhajfogkehjopahbphofpbn","https://lh3.googleusercontent.com/fJ0bPY_A2UqjPWO85jL7iP05o2c8aLUKX_2ro1qpYPPpnLBIIPIT6J4yY1CVmPrp3M0uTOEiFr187mRqUW4S6gGUug","AISEO - AI Writing Companion.",4.769230769230769,221,null,"Get writing superpowers with AISEO\'s advanced AI tools",null,null,true,null,["productivity/workflow",null,4],1,true,10000],["iidnbdjijdkbmajdffnidomddglmieko","https://lh3.googleusercontent.com/duD2Ni0DrGUJY4QjmXL_e8xAGQvnviTvfmFQbRIEHn0RhgP6maLi4TOTZ6sy8XUdxPuyrB1Wam_Mu-PEZCYXS9as","QuillBot: AI Writing and Grammar Checker Tool",4.435275080906149,618,"https://lh3.googleusercontent.com/pnBpODM8qbAK-Y6BsJ_DRXIGyiBy6xozmIEzTJMm-Z3bcT3XpouEuQVeJoBS7Dh6E1I5wY9vXuujEpHnYKfSLYOa","Elevate your writing with QuillBot\'s AI-powered productivity tools: Grammar Checker, Paraphraser, AI writer, Summarizer, and more!","quillbot.com",true,true,null,["productivity/communication",null,3],1,true,3000000,true],["aabfjmnamlihmlicgeoogldnfaaklfon","https://lh3.googleusercontent.com/QQ-wEL4wlrJUIHFdhEp_gqcx9_KvLEpY7kumGRaD1DT1arwbw3IgxtRaQzgVKbXOKUsn_RYnjJGc1HFE10n9VPiCkw","Writecream - AI-powered writing assistant",4.908508691674291,1093,"https://lh3.googleusercontent.com/JjQvzJq5C9jq6aSsm7RO6StMLoPmGmHwC9IMFaNFxXRoFlL4p-bY9rmLdZY-3-CBeMAgGZ5MbT7QNwmk4qwOX75hsA","An A.I-powered app for generating blog articles, YouTube videos \\u0026 podcasts in seconds.","writecream.com",true,true,null,["productivity/tools",null,5],1,true,9000,true],["hihmdflioglieahhkcllmngdmpijboae","https://lh3.googleusercontent.com/BihxYPmQdzsiELaHyFjbnIVt334tktH6AuITxKbjGV-rLmRz3qVdFPyP_Q2ghdXVWs7_0YL5SH9Xibywwa9ERYZCjQ","Scalenut: AI powered writer",4.90625,160,"https://lh3.googleusercontent.com/iDYkt50Or7Yb_ht2LgcJ9MoZynTR49rNTl2qvKNeArXSZZ6CxVZnEHOb0TolZCK28YKDPtJyRgm8BvyHl7i4YA0LRQ","Write, Command, Rephrase, Simplify and multiple other use cases using Content AI from Scalenut","scalenut.com",true,true,null,["productivity/workflow",null,4],1,true,5000,true],["jldbdlmljpigglecmeclifcdhgbjbakk","https://lh3.googleusercontent.com/OOFCGY9tDDExQs8ZMT2cjHGMX2IGU8Fg3yZt_Tp61fuaaE3fo9Fblw4XwwhaYP2KdrkB5bBsXMoEmxNPWWN-FxRJ3s4","Outwrite — Grammar checker \\u0026 rewrite tool",4.547169811320755,106,"https://lh3.googleusercontent.com/7VY0YQm2XJrIWSlbmHEeJktjCZiNGlPohsZM8AxUPS2cN1kLMR-UuBPzyXCChtql6BM2_Yzh4S3w7qeNnTEAk5qslgE","Write perfect content with Outwrite. Check spelling \\u0026 grammar, improve writing style, find synonyms and paraphrase sentences.","outwrite.com",true,true,null,["productivity/education",null,6],1,true,50000,true],["ddlbpiadoechcolndfeaonajmngmhblj","https://lh3.googleusercontent.com/5HmiTnv6h8QmF7rYjg5qe1BYToXRjB8ISCc081oJ6hBGjRPi-sPIOuhUZd_axRZ7dvPFHEeWUPJR5LDgnXnty2jOV6M","Compose AI: AI-powered Writing Tool",4.116279069767442,215,"https://lh3.googleusercontent.com/QcGewhdyh3hz6fPUvgLn2gvGHRAOvQhxS9kE-w4B04MWYyBRGD3Wsk_Y41kGvygG3Y8UQDL_GhWtsFZEGV9Qngzmcw","Accelerate your writing with AI","compose.ai",true,true,null,["productivity/communication",null,3],1,true,400000,true],["immpagioobbjjlckfakmgpnbhheamcbi","https://lh3.googleusercontent.com/3ABO0l1O_Y5GZmf2vpvEFyJcBtetBkr3NKnVFPn_cjfuFiD9xqelb62ZSXbbsodSA7V1d8IeUfSKpmqpu9R6gi8E9A","InstaText",4.666666666666667,12,"https://lh3.googleusercontent.com/xjiVyrdIxqqhDV0bLol3iBuXXRjsS2QvXY7GMmDCBa1UnLYM1NQjKZcv58udTMvFY2a88xRkgaAC2q2UYs6nTgOcx7Q","Write like a native speaker.","instatext.io",true,true,null,["productivity/workflow",null,4],1,true,100000,true]],null,null,null,null,"77",null,1,null,null,null,"https://www.wordtune.com/privacy-policy",null,null,true,2], sideChannel: {}});'
        expected = [['nllcnknpjnininklegdoijpljgdjkijc', 'https://lh3.googleusercontent.com/u6vAjFVGNe_rMEaHitlgzea-XtilYUbb6KvWL2TjxUXeoUYMlVUNiwawiyPjUMQSYktWyc6QDBfFvqY5ergeTn2IqQ', 'Wordtune: Generative AI productivity platform', 4.619027661357921, 2386, 'https://lh3.googleusercontent.com/2huOPk4yAIyNFMvSF2vq1XtDolNH8db_cI_x5adgamPE_soavBrQqBmeD2ZpwEZqtETZ6pJPTa5XUVF5onG5xHfn', "Unleash your professional potential with Wordtune's GenAI tools for work.", 'wordtune.com', True, True, None, ['productivity/workflow', None, 4], 1, True, 1000000, True], None, None, None, None, [[1, 'https://lh3.googleusercontent.com/mxlFMKwQQ9GCTRfr6pJ0qASX52lFD0km05WLVpD7lslBXMKdeNnnfQr5c148ucEjctkFgGr3WKvU3jZSx2OzzCiN'], [1, 'https://lh3.googleusercontent.com/7EhbuCkFih0BTfpZL6FWnJvABK2IFOyzZirVt7aZJDUScxBtz0f_GLB_LNfn2sp5_lWt0E5iiS5xvQaoCIOH7bQDiQ'], [1, 'https://lh3.googleusercontent.com/nuDyCh_E7u5KxSObu89PRkH9tE9YL_S-Zje6WrdC_Cdw3KIuDb3K8Ai3ZdZhajQnO4vP3cjFvKxvvduHv3DU7aLbfDI'], [1, 'https://lh3.googleusercontent.com/FIZE3yDBWweOm3EQ9OnXynuAPkaNbB7olSRjEccggQic3aomhTlIRjoeDc2iV69TqlDPNsU-uCIFCz75xY-yikprVA']], "Busy professionals have tons of work to get through. Some accept the frustration while others choose Wordtune to speed up their tasks. \n\nWordtune is a Generative AI platform for work productivity. By using reliable Generative AI, professionals from all fields can grow their careers and stand out at work. Whether you’re writing emails, creating documents or sending instant messages to colleagues or clients, Wordtune perfects your writing while streamlining your work using AI. \n\nTake your productivity to new heights with the Wordtune Chrome extension — available on all your favorite websites and web apps. \n\nWordtune’s latest and and most advanced set of GenAI tools for work include: \n\n➡️ Rewrite: Perfect your writing with Wordtune Rewrite — from a single word to an entire page.\n\n➡️ Summarization: Cut reading and watching time in half by summarizing YouTube videos, blog articles, PDFs and more. \n\n➡️ AI writing: Enhance your productivity by writing faster with AI suggestions — all while remaining true to your unique style.\n\n➡️ Corrections and recommendations: Write like the professional you are with AI recommendations. Unleash your thoughts without worrying about grammar or spelling mistakes.\n\n➡️ Smart translation: Choose from 10 languages to Smart translate to English. \n\n➡️ Tones and length: Make sure your message hits the right note — change your tone from professional to casual in just a click. Effortlessly reduce or increase word count depending on your needs. \n\nUse the Wordtune anywhere you need it: Whether you're on your desktop, mobile device or using your favorite apps, Wordtune is there for you.\n\nWe’re constantly working on updates and improvements to make your Wordtune experience even better. If you have questions or feedback, we would love to hear from you at help@wordtune.com.", [1, 5, 9], True, 1, ['help@wordtune.com', '124 Ibn Gabirol St.\nTel Aviv 6203854\nIL', None, True, None, 'Wordtune', None, 'AI21 Labs Ltd.'], None, None, '6.0.2', [1712055462, 326089000], '16.65MiB', ['English'], None, None, None, '{\n"update_url": "https://clients2.google.com/service/update2/crx",\n"manifest_version":2,"name":"Wordtune: Generative AI productivity platform","version":"6.0.2","description":"Unleash your professional potential with Wordtune\'s GenAI tools for work.","icons":{"48":"media/logo-48.png","128":"media/logo-128.png"},"background":{"scripts":["background.js"],"persistent":false},"content_scripts":[{"matches":["<all_urls>"],"js":["bundles/writingMonitor.js"],"run_at":"document_idle","all_frames":true,"css":[]},{"all_frames":false,"js":["bundles/enableCanvasAnnotations.js"],"matches":["*://docs.google.com/document/*"],"run_at":"document_start"},{"all_frames":false,"js":["bundles/injectExtensionInstalled.js"],"matches":["<all_urls>"],"run_at":"document_start"},{"all_frames":false,"js":["bundles/overrideCanvas.js"],"matches":["*://docs.google.com/document/*"],"run_at":"document_end"},{"matches":["<all_urls>"],"all_frames":true,"js":["bundles/content.js"],"run_at":"document_end","css":["fonts/fonts.css"]},{"matches":["<all_urls>"],"js":["read/content.js"],"all_frames":false,"css":["read/media/OpenSans.css","read/media/SofiaPro.css"]}],"browser_action":{"default_popup":"html/popup.html"},"minimum_chrome_version":"77","permissions":["alarms","cookies","storage","*://*/*","https://*.wordtune.com/*"],"optional_permissions":["clipboardRead","clipboardWrite"],"web_accessible_resources":["media/*.png","assets/*.png","assets/*.eot","assets/*.woff","assets/*.woff2","assets/*.ttf","assets/*.svg","assets/*.gif","fonts/Inter/*.woff","fonts/Inter/*.woff2","html/*.html","media/webFonts/*.woff","media/webFonts/*.woff2","read/media/*.woff","read/media/*.woff2","read/media/*.css"],"content_security_policy":"script-src \'self\' https://www.gstatic.com/ https://*.firebaseio.com https://www.googleapis.com; object-src \'self\'","externally_connectable":{"matches":["https://app.wordtune.com/*","https://www.wordtune.com/*"]}}', True, [['npnbdojkgkbcdfdjlfdmplppdphlhhcf', 'https://lh3.googleusercontent.com/GHv0Lq9Nb_wxNonJFV0OqInUqhQaTUC1whZ8iQvhWkOs3Bjz7Prv0LtXMIBGBNdfAYdv5GG7ERjX4iug1e4b2qF6Aw', 'ProWritingAid: Grammar Checker & Paraphrasing Tool', 4.837947755357423, 6393, 'https://lh3.googleusercontent.com/2hsQ22tpU5fgLoUAiTNzc1iSBu6e3LR7OnQoBuaJHAVMkmsN1uSjAZtew7nO0NdpkbyGu91lf1SQ3630b17WDEeSCQ', 'Gain confidence in your writing with the best grammar checker and paraphrasing tool that works wherever you do.', 'www.prowritingaid.com', True, True, None, ['productivity/workflow', None, 4], 1, True, 300000, True], ['cpnnabpklgnhjopaenljbbmkejamagel', 'https://lh3.googleusercontent.com/8kQwFC0s0cK-pfJhXVl-nLh8-KdbSWK3D3ZwJ7r1IQgXZU3P_Swprmwpw8wMMm-FaHpGz4McgBt42MqGcZbbZeVj', 'Rytr - AI powered writing assistant', 3.933333333333333, 30, None, 'Best AI Writer, Content Generator & Writing Assistant.', 'rytr.me', True, True, None, ['productivity/education', None, 6], 1, True, 50000, True], ['ieidddkeimflpkghaodhddcmlclcliaa', 'https://lh3.googleusercontent.com/7GtxXkDgVr6JKdxJLFvxViz08cldXPITCsayqBxMsWMgcl99MxokJfwveQj57Ws_fnt6qvVjXFQ_T5m8uWtsVDg2', 'ParagraphAI - Write Better, Faster', 4.333333333333333, 60, 'https://lh3.googleusercontent.com/JH2nNh8Sr44Ox_1DXuqp1yXTzrIvXolC2FFrChCJW7tDQwKH0h5IJp2OM6XP5VR4cKbeCbrgIHb7pQM561lyVY6KjA', 'ParagraphAI is an AI-powered writing tool that crafts perfectly curated content for all your writing needs.', 'paragraphai.com', True, True, None, ['productivity/communication', None, 3], 1, True, 40000, True], ['hngnkmianenpifegfoggnkamjnffiobn', 'https://lh3.googleusercontent.com/hoJxHmFFy8E0-OgAjZOpKe1FGRTWh7vmgRcga8YUhN-vgBaUpyphAdWuB9UmfE3xcAtzLAweRbmnfiu8vEoIPar43AA', 'Writer: Generative AI', 4.403225806451613, 62, 'https://lh3.googleusercontent.com/JL8YGdaVDzh81Yybs77yJzwgKn4ewHuUnY0fuLN__kPOUiNTzbwwQM5s31PEEgJJZitJQc3tEaUdcQbkaUEbDfrfug', 'Generative AI in all the places you work', 'writer.com', True, True, None, ['productivity/workflow', None, 4], 1, True, 100000, True], ['kljjoeapehcmaphfcjkmbhkinoaopdnd', 'https://lh3.googleusercontent.com/roLFXs4GSKTU5tAe2MPKk0PwI-CugDF9i3uNN2m4GvyCCJAekXiTqGBqoFL3Yvy0HRYxPbhyPLVfmZj51dNHbTJpYA', 'HyperWrite - AI Assistant', 4.376344086021505, 93, 'https://lh3.googleusercontent.com/sLiNBc8Yk0lC-_6U4rHyDeUZVm5wJVcQCYdW-AH7LNhk1w5z-WYNFHJcM0wLfYm7Bv8LOjiLQWgPgKcKn70oMOw4Jg', "Personal Assistant by HyperWrite is the first AI agent that can operate your browser. It's like self-driving mode for the web.", 'hyperwriteai.com', True, True, None, ['productivity/workflow', None, 4], 1, True, 100000, True], ['hkfhclakgkhajfogkehjopahbphofpbn', 'https://lh3.googleusercontent.com/fJ0bPY_A2UqjPWO85jL7iP05o2c8aLUKX_2ro1qpYPPpnLBIIPIT6J4yY1CVmPrp3M0uTOEiFr187mRqUW4S6gGUug', 'AISEO - AI Writing Companion.', 4.769230769230769, 221, None, "Get writing superpowers with AISEO's advanced AI tools", None, None, True, None, ['productivity/workflow', None, 4], 1, True, 10000], ['iidnbdjijdkbmajdffnidomddglmieko', 'https://lh3.googleusercontent.com/duD2Ni0DrGUJY4QjmXL_e8xAGQvnviTvfmFQbRIEHn0RhgP6maLi4TOTZ6sy8XUdxPuyrB1Wam_Mu-PEZCYXS9as', 'QuillBot: AI Writing and Grammar Checker Tool', 4.435275080906149, 618, 'https://lh3.googleusercontent.com/pnBpODM8qbAK-Y6BsJ_DRXIGyiBy6xozmIEzTJMm-Z3bcT3XpouEuQVeJoBS7Dh6E1I5wY9vXuujEpHnYKfSLYOa', "Elevate your writing with QuillBot's AI-powered productivity tools: Grammar Checker, Paraphraser, AI writer, Summarizer, and more!", 'quillbot.com', True, True, None, ['productivity/communication', None, 3], 1, True, 3000000, True], ['aabfjmnamlihmlicgeoogldnfaaklfon', 'https://lh3.googleusercontent.com/QQ-wEL4wlrJUIHFdhEp_gqcx9_KvLEpY7kumGRaD1DT1arwbw3IgxtRaQzgVKbXOKUsn_RYnjJGc1HFE10n9VPiCkw', 'Writecream - AI-powered writing assistant', 4.908508691674291, 1093, 'https://lh3.googleusercontent.com/JjQvzJq5C9jq6aSsm7RO6StMLoPmGmHwC9IMFaNFxXRoFlL4p-bY9rmLdZY-3-CBeMAgGZ5MbT7QNwmk4qwOX75hsA', 'An A.I-powered app for generating blog articles, YouTube videos & podcasts in seconds.', 'writecream.com', True, True, None, ['productivity/tools', None, 5], 1, True, 9000, True], ['hihmdflioglieahhkcllmngdmpijboae', 'https://lh3.googleusercontent.com/BihxYPmQdzsiELaHyFjbnIVt334tktH6AuITxKbjGV-rLmRz3qVdFPyP_Q2ghdXVWs7_0YL5SH9Xibywwa9ERYZCjQ', 'Scalenut: AI powered writer', 4.90625, 160, 'https://lh3.googleusercontent.com/iDYkt50Or7Yb_ht2LgcJ9MoZynTR49rNTl2qvKNeArXSZZ6CxVZnEHOb0TolZCK28YKDPtJyRgm8BvyHl7i4YA0LRQ', 'Write, Command, Rephrase, Simplify and multiple other use cases using Content AI from Scalenut', 'scalenut.com', True, True, None, ['productivity/workflow', None, 4], 1, True, 5000, True], ['jldbdlmljpigglecmeclifcdhgbjbakk', 'https://lh3.googleusercontent.com/OOFCGY9tDDExQs8ZMT2cjHGMX2IGU8Fg3yZt_Tp61fuaaE3fo9Fblw4XwwhaYP2KdrkB5bBsXMoEmxNPWWN-FxRJ3s4', 'Outwrite — Grammar checker & rewrite tool', 4.547169811320755, 106, 'https://lh3.googleusercontent.com/7VY0YQm2XJrIWSlbmHEeJktjCZiNGlPohsZM8AxUPS2cN1kLMR-UuBPzyXCChtql6BM2_Yzh4S3w7qeNnTEAk5qslgE', 'Write perfect content with Outwrite. Check spelling & grammar, improve writing style, find synonyms and paraphrase sentences.', 'outwrite.com', True, True, None, ['productivity/education', None, 6], 1, True, 50000, True], ['ddlbpiadoechcolndfeaonajmngmhblj', 'https://lh3.googleusercontent.com/5HmiTnv6h8QmF7rYjg5qe1BYToXRjB8ISCc081oJ6hBGjRPi-sPIOuhUZd_axRZ7dvPFHEeWUPJR5LDgnXnty2jOV6M', 'Compose AI: AI-powered Writing Tool', 4.116279069767442, 215, 'https://lh3.googleusercontent.com/QcGewhdyh3hz6fPUvgLn2gvGHRAOvQhxS9kE-w4B04MWYyBRGD3Wsk_Y41kGvygG3Y8UQDL_GhWtsFZEGV9Qngzmcw', 'Accelerate your writing with AI', 'compose.ai', True, True, None, ['productivity/communication', None, 3], 1, True, 400000, True], ['immpagioobbjjlckfakmgpnbhheamcbi', 'https://lh3.googleusercontent.com/3ABO0l1O_Y5GZmf2vpvEFyJcBtetBkr3NKnVFPn_cjfuFiD9xqelb62ZSXbbsodSA7V1d8IeUfSKpmqpu9R6gi8E9A', 'InstaText', 4.666666666666667, 12, 'https://lh3.googleusercontent.com/xjiVyrdIxqqhDV0bLol3iBuXXRjsS2QvXY7GMmDCBa1UnLYM1NQjKZcv58udTMvFY2a88xRkgaAC2q2UYs6nTgOcx7Q', 'Write like a native speaker.', 'instatext.io', True, True, None, ['productivity/workflow', None, 4], 1, True, 100000, True]], None, None, None, None, '77', None, 1, None, None, None, 'https://www.wordtune.com/privacy-policy', None, None, True, 2]

        self.assertEqual(script_text_to_json(script_text), expected)

    def test_format_script_data(self):
        script_data = [['nllcnknpjnininklegdoijpljgdjkijc', 'https://lh3.googleusercontent.com/u6vAjFVGNe_rMEaHitlgzea-XtilYUbb6KvWL2TjxUXeoUYMlVUNiwawiyPjUMQSYktWyc6QDBfFvqY5ergeTn2IqQ', 'Wordtune: Generative AI productivity platform', 4.619027661357921, 2386, 'https://lh3.googleusercontent.com/2huOPk4yAIyNFMvSF2vq1XtDolNH8db_cI_x5adgamPE_soavBrQqBmeD2ZpwEZqtETZ6pJPTa5XUVF5onG5xHfn', "Unleash your professional potential with Wordtune's GenAI tools for work.", 'wordtune.com', True, True, None, ['productivity/workflow', None, 4], 1, True, 1000000, True], None, None, None, None, [[1, 'https://lh3.googleusercontent.com/mxlFMKwQQ9GCTRfr6pJ0qASX52lFD0km05WLVpD7lslBXMKdeNnnfQr5c148ucEjctkFgGr3WKvU3jZSx2OzzCiN'], [1, 'https://lh3.googleusercontent.com/7EhbuCkFih0BTfpZL6FWnJvABK2IFOyzZirVt7aZJDUScxBtz0f_GLB_LNfn2sp5_lWt0E5iiS5xvQaoCIOH7bQDiQ'], [1, 'https://lh3.googleusercontent.com/nuDyCh_E7u5KxSObu89PRkH9tE9YL_S-Zje6WrdC_Cdw3KIuDb3K8Ai3ZdZhajQnO4vP3cjFvKxvvduHv3DU7aLbfDI'], [1, 'https://lh3.googleusercontent.com/FIZE3yDBWweOm3EQ9OnXynuAPkaNbB7olSRjEccggQic3aomhTlIRjoeDc2iV69TqlDPNsU-uCIFCz75xY-yikprVA']], "Busy professionals have tons of work to get through. Some accept the frustration while others choose Wordtune to speed up their tasks. \n\nWordtune is a Generative AI platform for work productivity. By using reliable Generative AI, professionals from all fields can grow their careers and stand out at work. Whether you’re writing emails, creating documents or sending instant messages to colleagues or clients, Wordtune perfects your writing while streamlining your work using AI. \n\nTake your productivity to new heights with the Wordtune Chrome extension — available on all your favorite websites and web apps. \n\nWordtune’s latest and and most advanced set of GenAI tools for work include: \n\n➡️ Rewrite: Perfect your writing with Wordtune Rewrite — from a single word to an entire page.\n\n➡️ Summarization: Cut reading and watching time in half by summarizing YouTube videos, blog articles, PDFs and more. \n\n➡️ AI writing: Enhance your productivity by writing faster with AI suggestions — all while remaining true to your unique style.\n\n➡️ Corrections and recommendations: Write like the professional you are with AI recommendations. Unleash your thoughts without worrying about grammar or spelling mistakes.\n\n➡️ Smart translation: Choose from 10 languages to Smart translate to English. \n\n➡️ Tones and length: Make sure your message hits the right note — change your tone from professional to casual in just a click. Effortlessly reduce or increase word count depending on your needs. \n\nUse the Wordtune anywhere you need it: Whether you're on your desktop, mobile device or using your favorite apps, Wordtune is there for you.\n\nWe’re constantly working on updates and improvements to make your Wordtune experience even better. If you have questions or feedback, we would love to hear from you at help@wordtune.com.", [1, 5, 9], True, 1, ['help@wordtune.com', '124 Ibn Gabirol St.\nTel Aviv 6203854\nIL', None, True, None, 'Wordtune', None, 'AI21 Labs Ltd.'], None, None, '6.0.2', [1712055462, 326089000], '16.65MiB', ['English'], None, None, None, '{\n"update_url": "https://clients2.google.com/service/update2/crx",\n"manifest_version":2,"name":"Wordtune: Generative AI productivity platform","version":"6.0.2","description":"Unleash your professional potential with Wordtune\'s GenAI tools for work.","icons":{"48":"media/logo-48.png","128":"media/logo-128.png"},"background":{"scripts":["background.js"],"persistent":false},"content_scripts":[{"matches":["<all_urls>"],"js":["bundles/writingMonitor.js"],"run_at":"document_idle","all_frames":true,"css":[]},{"all_frames":false,"js":["bundles/enableCanvasAnnotations.js"],"matches":["*://docs.google.com/document/*"],"run_at":"document_start"},{"all_frames":false,"js":["bundles/injectExtensionInstalled.js"],"matches":["<all_urls>"],"run_at":"document_start"},{"all_frames":false,"js":["bundles/overrideCanvas.js"],"matches":["*://docs.google.com/document/*"],"run_at":"document_end"},{"matches":["<all_urls>"],"all_frames":true,"js":["bundles/content.js"],"run_at":"document_end","css":["fonts/fonts.css"]},{"matches":["<all_urls>"],"js":["read/content.js"],"all_frames":false,"css":["read/media/OpenSans.css","read/media/SofiaPro.css"]}],"browser_action":{"default_popup":"html/popup.html"},"minimum_chrome_version":"77","permissions":["alarms","cookies","storage","*://*/*","https://*.wordtune.com/*"],"optional_permissions":["clipboardRead","clipboardWrite"],"web_accessible_resources":["media/*.png","assets/*.png","assets/*.eot","assets/*.woff","assets/*.woff2","assets/*.ttf","assets/*.svg","assets/*.gif","fonts/Inter/*.woff","fonts/Inter/*.woff2","html/*.html","media/webFonts/*.woff","media/webFonts/*.woff2","read/media/*.woff","read/media/*.woff2","read/media/*.css"],"content_security_policy":"script-src \'self\' https://www.gstatic.com/ https://*.firebaseio.com https://www.googleapis.com; object-src \'self\'","externally_connectable":{"matches":["https://app.wordtune.com/*","https://www.wordtune.com/*"]}}', True, [['npnbdojkgkbcdfdjlfdmplppdphlhhcf', 'https://lh3.googleusercontent.com/GHv0Lq9Nb_wxNonJFV0OqInUqhQaTUC1whZ8iQvhWkOs3Bjz7Prv0LtXMIBGBNdfAYdv5GG7ERjX4iug1e4b2qF6Aw', 'ProWritingAid: Grammar Checker & Paraphrasing Tool', 4.837947755357423, 6393, 'https://lh3.googleusercontent.com/2hsQ22tpU5fgLoUAiTNzc1iSBu6e3LR7OnQoBuaJHAVMkmsN1uSjAZtew7nO0NdpkbyGu91lf1SQ3630b17WDEeSCQ', 'Gain confidence in your writing with the best grammar checker and paraphrasing tool that works wherever you do.', 'www.prowritingaid.com', True, True, None, ['productivity/workflow', None, 4], 1, True, 300000, True], ['cpnnabpklgnhjopaenljbbmkejamagel', 'https://lh3.googleusercontent.com/8kQwFC0s0cK-pfJhXVl-nLh8-KdbSWK3D3ZwJ7r1IQgXZU3P_Swprmwpw8wMMm-FaHpGz4McgBt42MqGcZbbZeVj', 'Rytr - AI powered writing assistant', 3.933333333333333, 30, None, 'Best AI Writer, Content Generator & Writing Assistant.', 'rytr.me', True, True, None, ['productivity/education', None, 6], 1, True, 50000, True], ['ieidddkeimflpkghaodhddcmlclcliaa', 'https://lh3.googleusercontent.com/7GtxXkDgVr6JKdxJLFvxViz08cldXPITCsayqBxMsWMgcl99MxokJfwveQj57Ws_fnt6qvVjXFQ_T5m8uWtsVDg2', 'ParagraphAI - Write Better, Faster', 4.333333333333333, 60, 'https://lh3.googleusercontent.com/JH2nNh8Sr44Ox_1DXuqp1yXTzrIvXolC2FFrChCJW7tDQwKH0h5IJp2OM6XP5VR4cKbeCbrgIHb7pQM561lyVY6KjA', 'ParagraphAI is an AI-powered writing tool that crafts perfectly curated content for all your writing needs.', 'paragraphai.com', True, True, None, ['productivity/communication', None, 3], 1, True, 40000, True], ['hngnkmianenpifegfoggnkamjnffiobn', 'https://lh3.googleusercontent.com/hoJxHmFFy8E0-OgAjZOpKe1FGRTWh7vmgRcga8YUhN-vgBaUpyphAdWuB9UmfE3xcAtzLAweRbmnfiu8vEoIPar43AA', 'Writer: Generative AI', 4.403225806451613, 62, 'https://lh3.googleusercontent.com/JL8YGdaVDzh81Yybs77yJzwgKn4ewHuUnY0fuLN__kPOUiNTzbwwQM5s31PEEgJJZitJQc3tEaUdcQbkaUEbDfrfug', 'Generative AI in all the places you work', 'writer.com', True, True, None, ['productivity/workflow', None, 4], 1, True, 100000, True], ['kljjoeapehcmaphfcjkmbhkinoaopdnd', 'https://lh3.googleusercontent.com/roLFXs4GSKTU5tAe2MPKk0PwI-CugDF9i3uNN2m4GvyCCJAekXiTqGBqoFL3Yvy0HRYxPbhyPLVfmZj51dNHbTJpYA', 'HyperWrite - AI Assistant', 4.376344086021505, 93, 'https://lh3.googleusercontent.com/sLiNBc8Yk0lC-_6U4rHyDeUZVm5wJVcQCYdW-AH7LNhk1w5z-WYNFHJcM0wLfYm7Bv8LOjiLQWgPgKcKn70oMOw4Jg', "Personal Assistant by HyperWrite is the first AI agent that can operate your browser. It's like self-driving mode for the web.", 'hyperwriteai.com', True, True, None, ['productivity/workflow', None, 4], 1, True, 100000, True], ['hkfhclakgkhajfogkehjopahbphofpbn', 'https://lh3.googleusercontent.com/fJ0bPY_A2UqjPWO85jL7iP05o2c8aLUKX_2ro1qpYPPpnLBIIPIT6J4yY1CVmPrp3M0uTOEiFr187mRqUW4S6gGUug', 'AISEO - AI Writing Companion.', 4.769230769230769, 221, None, "Get writing superpowers with AISEO's advanced AI tools", None, None, True, None, ['productivity/workflow', None, 4], 1, True, 10000], ['iidnbdjijdkbmajdffnidomddglmieko', 'https://lh3.googleusercontent.com/duD2Ni0DrGUJY4QjmXL_e8xAGQvnviTvfmFQbRIEHn0RhgP6maLi4TOTZ6sy8XUdxPuyrB1Wam_Mu-PEZCYXS9as', 'QuillBot: AI Writing and Grammar Checker Tool', 4.435275080906149, 618, 'https://lh3.googleusercontent.com/pnBpODM8qbAK-Y6BsJ_DRXIGyiBy6xozmIEzTJMm-Z3bcT3XpouEuQVeJoBS7Dh6E1I5wY9vXuujEpHnYKfSLYOa', "Elevate your writing with QuillBot's AI-powered productivity tools: Grammar Checker, Paraphraser, AI writer, Summarizer, and more!", 'quillbot.com', True, True, None, ['productivity/communication', None, 3], 1, True, 3000000, True], ['aabfjmnamlihmlicgeoogldnfaaklfon', 'https://lh3.googleusercontent.com/QQ-wEL4wlrJUIHFdhEp_gqcx9_KvLEpY7kumGRaD1DT1arwbw3IgxtRaQzgVKbXOKUsn_RYnjJGc1HFE10n9VPiCkw', 'Writecream - AI-powered writing assistant', 4.908508691674291, 1093, 'https://lh3.googleusercontent.com/JjQvzJq5C9jq6aSsm7RO6StMLoPmGmHwC9IMFaNFxXRoFlL4p-bY9rmLdZY-3-CBeMAgGZ5MbT7QNwmk4qwOX75hsA', 'An A.I-powered app for generating blog articles, YouTube videos & podcasts in seconds.', 'writecream.com', True, True, None, ['productivity/tools', None, 5], 1, True, 9000, True], ['hihmdflioglieahhkcllmngdmpijboae', 'https://lh3.googleusercontent.com/BihxYPmQdzsiELaHyFjbnIVt334tktH6AuITxKbjGV-rLmRz3qVdFPyP_Q2ghdXVWs7_0YL5SH9Xibywwa9ERYZCjQ', 'Scalenut: AI powered writer', 4.90625, 160, 'https://lh3.googleusercontent.com/iDYkt50Or7Yb_ht2LgcJ9MoZynTR49rNTl2qvKNeArXSZZ6CxVZnEHOb0TolZCK28YKDPtJyRgm8BvyHl7i4YA0LRQ', 'Write, Command, Rephrase, Simplify and multiple other use cases using Content AI from Scalenut', 'scalenut.com', True, True, None, ['productivity/workflow', None, 4], 1, True, 5000, True], ['jldbdlmljpigglecmeclifcdhgbjbakk', 'https://lh3.googleusercontent.com/OOFCGY9tDDExQs8ZMT2cjHGMX2IGU8Fg3yZt_Tp61fuaaE3fo9Fblw4XwwhaYP2KdrkB5bBsXMoEmxNPWWN-FxRJ3s4', 'Outwrite — Grammar checker & rewrite tool', 4.547169811320755, 106, 'https://lh3.googleusercontent.com/7VY0YQm2XJrIWSlbmHEeJktjCZiNGlPohsZM8AxUPS2cN1kLMR-UuBPzyXCChtql6BM2_Yzh4S3w7qeNnTEAk5qslgE', 'Write perfect content with Outwrite. Check spelling & grammar, improve writing style, find synonyms and paraphrase sentences.', 'outwrite.com', True, True, None, ['productivity/education', None, 6], 1, True, 50000, True], ['ddlbpiadoechcolndfeaonajmngmhblj', 'https://lh3.googleusercontent.com/5HmiTnv6h8QmF7rYjg5qe1BYToXRjB8ISCc081oJ6hBGjRPi-sPIOuhUZd_axRZ7dvPFHEeWUPJR5LDgnXnty2jOV6M', 'Compose AI: AI-powered Writing Tool', 4.116279069767442, 215, 'https://lh3.googleusercontent.com/QcGewhdyh3hz6fPUvgLn2gvGHRAOvQhxS9kE-w4B04MWYyBRGD3Wsk_Y41kGvygG3Y8UQDL_GhWtsFZEGV9Qngzmcw', 'Accelerate your writing with AI', 'compose.ai', True, True, None, ['productivity/communication', None, 3], 1, True, 400000, True], ['immpagioobbjjlckfakmgpnbhheamcbi', 'https://lh3.googleusercontent.com/3ABO0l1O_Y5GZmf2vpvEFyJcBtetBkr3NKnVFPn_cjfuFiD9xqelb62ZSXbbsodSA7V1d8IeUfSKpmqpu9R6gi8E9A', 'InstaText', 4.666666666666667, 12, 'https://lh3.googleusercontent.com/xjiVyrdIxqqhDV0bLol3iBuXXRjsS2QvXY7GMmDCBa1UnLYM1NQjKZcv58udTMvFY2a88xRkgaAC2q2UYs6nTgOcx7Q', 'Write like a native speaker.', 'instatext.io', True, True, None, ['productivity/workflow', None, 4], 1, True, 100000, True]], None, None, None, None, '77', None, 1, None, None, None, 'https://www.wordtune.com/privacy-policy', None, None, True, 2]
        expected = {
            "id": "nllcnknpjnininklegdoijpljgdjkijc",
            "title": "Wordtune: Generative AI productivity platform",
            "type": "Extension",
            "icon": "https://lh3.googleusercontent.com/u6vAjFVGNe_rMEaHitlgzea-XtilYUbb6KvWL2TjxUXeoUYMlVUNiwawiyPjUMQSYktWyc6QDBfFvqY5ergeTn2IqQ",
            "small_promo_tile": "https://lh3.googleusercontent.com/2huOPk4yAIyNFMvSF2vq1XtDolNH8db_cI_x5adgamPE_soavBrQqBmeD2ZpwEZqtETZ6pJPTa5XUVF5onG5xHfn",
            "website_owner": "wordtune.com",
            "created_by_the_website_owner": True,
            "rating": 4.619027661357921,
            "rating_count": 2386,
            "category": "productivity/workflow",
            "users": 1000000,
            "screenshots": [
                "https://lh3.googleusercontent.com/mxlFMKwQQ9GCTRfr6pJ0qASX52lFD0km05WLVpD7lslBXMKdeNnnfQr5c148ucEjctkFgGr3WKvU3jZSx2OzzCiN",
                "https://lh3.googleusercontent.com/7EhbuCkFih0BTfpZL6FWnJvABK2IFOyzZirVt7aZJDUScxBtz0f_GLB_LNfn2sp5_lWt0E5iiS5xvQaoCIOH7bQDiQ",
                "https://lh3.googleusercontent.com/nuDyCh_E7u5KxSObu89PRkH9tE9YL_S-Zje6WrdC_Cdw3KIuDb3K8Ai3ZdZhajQnO4vP3cjFvKxvvduHv3DU7aLbfDI",
                "https://lh3.googleusercontent.com/FIZE3yDBWweOm3EQ9OnXynuAPkaNbB7olSRjEccggQic3aomhTlIRjoeDc2iV69TqlDPNsU-uCIFCz75xY-yikprVA"
            ],
            "overview": "Busy professionals have tons of work to get through. Some accept the frustration while others choose Wordtune to speed up their tasks. \n\nWordtune is a Generative AI platform for work productivity. By using reliable Generative AI, professionals from all fields can grow their careers and stand out at work. Whether you’re writing emails, creating documents or sending instant messages to colleagues or clients, Wordtune perfects your writing while streamlining your work using AI. \n\nTake your productivity to new heights with the Wordtune Chrome extension — available on all your favorite websites and web apps. \n\nWordtune’s latest and and most advanced set of GenAI tools for work include: \n\n➡\uFE0F Rewrite: Perfect your writing with Wordtune Rewrite — from a single word to an entire page.\n\n➡\uFE0F Summarization: Cut reading and watching time in half by summarizing YouTube videos, blog articles, PDFs and more. \n\n➡\uFE0F AI writing: Enhance your productivity by writing faster with AI suggestions — all while remaining true to your unique style.\n\n➡\uFE0F Corrections and recommendations: Write like the professional you are with AI recommendations. Unleash your thoughts without worrying about grammar or spelling mistakes.\n\n➡\uFE0F Smart translation: Choose from 10 languages to Smart translate to English. \n\n➡\uFE0F Tones and length: Make sure your message hits the right note — change your tone from professional to casual in just a click. Effortlessly reduce or increase word count depending on your needs. \n\nUse the Wordtune anywhere you need it: Whether you're on your desktop, mobile device or using your favorite apps, Wordtune is there for you.\n\nWe’re constantly working on updates and improvements to make your Wordtune experience even better. If you have questions or feedback, we would love to hear from you at help@wordtune.com.",
            "version": "6.0.2",
            "size": "16.65MiB",
            "languages": [
                "English"
            ],
            "last_updated": 1712055462,
            "developer": {
                "name": "Wordtune",
                "address": "AI21 Labs Ltd.\n124 Ibn Gabirol St.\nTel Aviv 6203854\nIL",
                "website": "wordtune.com",
                "email": "help@wordtune.com",
                "trader": True
            }
        }
        self.assertEqual(format_script_data(script_data), expected)

    def load_manifest(self):
        manifest_raw = "{\n\"update_url\": \"https://clients2.google.com/service/update2/crx\",\n\n  \"manifest_version\": 2,\n  \"name\": \"Tweaks for TopMeteo.eu\",\n  \"description\": \"Usability enhancements for topmeteo.eu\",\n  \"version\": \"2.3\",\n  \"content_scripts\": [\n    {\n      \"matches\": [\"https://*.topmeteo.eu/*\"],\n      \"js\": [\"topmeteo.js\"],\n      \"run_at\": \"document_end\"\n    }\n  ]\n}\n"
        load_manifest(manifest_raw)

    def load_manifest_BOM(self):
        manifest_raw = "\ufeff{\n\"update_url\":\"http://clients2.google.com/service/update2/crx\",\"version\":\"2.20\",\"name\":\"СС theme by wow23\",\"description\":\"best anime ever?!\\r\\n\",\"theme\":{\"images\":{\"theme_frame\":\"images\\/theme_frame.png\",\"theme_toolbar\":\"images\\/theme_toolbar.png\",\"theme_tab_background\":\"images\\/theme_tab_background.png\",\"theme_ntp_background\":\"images\\/theme_ntp_background.png\"},\"colors\":{\"frame\":[174,212,116],\"frame_inactive\":[174,212,116],\"frame_incognito\":[100,122,67],\"frame_incognito_inactive\":[100,122,67],\"toolbar\":[174,212,116],\"tab_text\":[0,0,0],\"tab_background_text\":[115,115,115],\"bookmark_text\":[0,0,0],\"ntp_background\":[255,255,255],\"ntp_text\":[0,0,0],\"ntp_link\":[0,0,0],\"ntp_header\":[174,212,116],\"ntp_section\":[226,238,208],\"ntp_section_text\":[174,212,116],\"ntp_section_link\":[0,0,0],\"control_background\":[0,0,0,0],\"button_background\":[174,212,116,0]},\"properties\":{\"ntp_background_alignment\":\"\",\"ntp_background_repeat\":\"no-repeat\"},\"tints\":{\"buttons\":[1,1,1],\"frame\":[-1,-1,-1],\"frame_inactive\":[-1,-1,0.75],\"frame_incognito\":[-1,0.2,0.35],\"frame_incognito_inactive\":[-1,0.3,0.6],\"background_tab\":[-1,0.5,0.75]}}}"
        # expect no JSONDecodeError
        load_manifest(manifest_raw)

    def is_manifest_valid(self):
        manifest = {
            "name": "Tweaks for TopMeteo.eu",
            "version": "2.3"
        }
        self.assertTrue(is_manifest_valid(manifest))

    def is_manifest_valid_false(self):
        manifest = []
        self.assertFalse(is_manifest_valid(manifest))

        manifest = manifest = {
            "a": "lhjsdil",
            "b": 2
        }
        self.assertFalse(is_manifest_valid(manifest))

        manifest = 'ahj'
        self.assertFalse(is_manifest_valid(manifest))
