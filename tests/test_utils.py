import unittest
from chrome_web_store_scraper.utils import script_text_to_json, format_script_data, load_manifest, is_manifest_valid, \
    get_users, script_text_to_json


class TestUtils(unittest.TestCase):
    def setUp(self):
        self.maxDiff = None

    def test_script_text_to_json(self):
        script_text = 'AF_initDataCallback({key: \'ds:0\', hash: \'2\', data:[["nllcnknpjnininklegdoijpljgdjkijc","https://lh3.googleusercontent.com/u6vAjFVGNe_rMEaHitlgzea-XtilYUbb6KvWL2TjxUXeoUYMlVUNiwawiyPjUMQSYktWyc6QDBfFvqY5ergeTn2IqQ","Wordtune: Generative AI productivity platform",4.619027661357921,2386,"https://lh3.googleusercontent.com/2huOPk4yAIyNFMvSF2vq1XtDolNH8db_cI_x5adgamPE_soavBrQqBmeD2ZpwEZqtETZ6pJPTa5XUVF5onG5xHfn","Unleash your professional potential with Wordtune\'s GenAI tools for work.","wordtune.com",true,true,null,["productivity/workflow",null,4],1,true,1000000,true],null,null,null,null,[[1,"https://lh3.googleusercontent.com/mxlFMKwQQ9GCTRfr6pJ0qASX52lFD0km05WLVpD7lslBXMKdeNnnfQr5c148ucEjctkFgGr3WKvU3jZSx2OzzCiN"],[1,"https://lh3.googleusercontent.com/7EhbuCkFih0BTfpZL6FWnJvABK2IFOyzZirVt7aZJDUScxBtz0f_GLB_LNfn2sp5_lWt0E5iiS5xvQaoCIOH7bQDiQ"],[1,"https://lh3.googleusercontent.com/nuDyCh_E7u5KxSObu89PRkH9tE9YL_S-Zje6WrdC_Cdw3KIuDb3K8Ai3ZdZhajQnO4vP3cjFvKxvvduHv3DU7aLbfDI"],[1,"https://lh3.googleusercontent.com/FIZE3yDBWweOm3EQ9OnXynuAPkaNbB7olSRjEccggQic3aomhTlIRjoeDc2iV69TqlDPNsU-uCIFCz75xY-yikprVA"]],"Busy professionals have tons of work to get through. Some accept the frustration while others choose Wordtune to speed up their tasks. \\n\\nWordtune is a Generative AI platform for work productivity. By using reliable Generative AI, professionals from all fields can grow their careers and stand out at work. Whether you’re writing emails, creating documents or sending instant messages to colleagues or clients, Wordtune perfects your writing while streamlining your work using AI. \\n\\nTake your productivity to new heights with the Wordtune Chrome extension — available on all your favorite websites and web apps. \\n\\nWordtune’s latest and and most advanced set of GenAI tools for work include: \\n\\n➡️ Rewrite: Perfect your writing with Wordtune Rewrite — from a single word to an entire page.\\n\\n➡️ Summarization: Cut reading and watching time in half by summarizing YouTube videos, blog articles, PDFs and more. \\n\\n➡️ AI writing: Enhance your productivity by writing faster with AI suggestions — all while remaining true to your unique style.\\n\\n➡️ Corrections and recommendations: Write like the professional you are with AI recommendations. Unleash your thoughts without worrying about grammar or spelling mistakes.\\n\\n➡️ Smart translation: Choose from 10 languages to Smart translate to English. \\n\\n➡️ Tones and length: Make sure your message hits the right note — change your tone from professional to casual in just a click. Effortlessly reduce or increase word count depending on your needs. \\n\\nUse the Wordtune anywhere you need it: Whether you\'re on your desktop, mobile device or using your favorite apps, Wordtune is there for you.\\n\\nWe’re constantly working on updates and improvements to make your Wordtune experience even better. If you have questions or feedback, we would love to hear from you at help@wordtune.com.",[1,5,9],true,1,["help@wordtune.com","124 Ibn Gabirol St.\\nTel Aviv 6203854\\nIL",null,true,null,"Wordtune",null,"AI21 Labs Ltd."],null,null,"6.0.2",[1712055462,326089000],"16.65MiB",["English"],null,null,null,"{\\n\\"update_url\\": \\"https://clients2.google.com/service/update2/crx\\",\\n\\"manifest_version\\":2,\\"name\\":\\"Wordtune: Generative AI productivity platform\\",\\"version\\":\\"6.0.2\\",\\"description\\":\\"Unleash your professional potential with Wordtune\'s GenAI tools for work.\\",\\"icons\\":{\\"48\\":\\"media/logo-48.png\\",\\"128\\":\\"media/logo-128.png\\"},\\"background\\":{\\"scripts\\":[\\"background.js\\"],\\"persistent\\":false},\\"content_scripts\\":[{\\"matches\\":[\\"\\u003call_urls\\u003e\\"],\\"js\\":[\\"bundles/writingMonitor.js\\"],\\"run_at\\":\\"document_idle\\",\\"all_frames\\":true,\\"css\\":[]},{\\"all_frames\\":false,\\"js\\":[\\"bundles/enableCanvasAnnotations.js\\"],\\"matches\\":[\\"*://docs.google.com/document/*\\"],\\"run_at\\":\\"document_start\\"},{\\"all_frames\\":false,\\"js\\":[\\"bundles/injectExtensionInstalled.js\\"],\\"matches\\":[\\"\\u003call_urls\\u003e\\"],\\"run_at\\":\\"document_start\\"},{\\"all_frames\\":false,\\"js\\":[\\"bundles/overrideCanvas.js\\"],\\"matches\\":[\\"*://docs.google.com/document/*\\"],\\"run_at\\":\\"document_end\\"},{\\"matches\\":[\\"\\u003call_urls\\u003e\\"],\\"all_frames\\":true,\\"js\\":[\\"bundles/content.js\\"],\\"run_at\\":\\"document_end\\",\\"css\\":[\\"fonts/fonts.css\\"]},{\\"matches\\":[\\"\\u003call_urls\\u003e\\"],\\"js\\":[\\"read/content.js\\"],\\"all_frames\\":false,\\"css\\":[\\"read/media/OpenSans.css\\",\\"read/media/SofiaPro.css\\"]}],\\"browser_action\\":{\\"default_popup\\":\\"html/popup.html\\"},\\"minimum_chrome_version\\":\\"77\\",\\"permissions\\":[\\"alarms\\",\\"cookies\\",\\"storage\\",\\"*://*/*\\",\\"https://*.wordtune.com/*\\"],\\"optional_permissions\\":[\\"clipboardRead\\",\\"clipboardWrite\\"],\\"web_accessible_resources\\":[\\"media/*.png\\",\\"assets/*.png\\",\\"assets/*.eot\\",\\"assets/*.woff\\",\\"assets/*.woff2\\",\\"assets/*.ttf\\",\\"assets/*.svg\\",\\"assets/*.gif\\",\\"fonts/Inter/*.woff\\",\\"fonts/Inter/*.woff2\\",\\"html/*.html\\",\\"media/webFonts/*.woff\\",\\"media/webFonts/*.woff2\\",\\"read/media/*.woff\\",\\"read/media/*.woff2\\",\\"read/media/*.css\\"],\\"content_security_policy\\":\\"script-src \'self\' https://www.gstatic.com/ https://*.firebaseio.com https://www.googleapis.com; object-src \'self\'\\",\\"externally_connectable\\":{\\"matches\\":[\\"https://app.wordtune.com/*\\",\\"https://www.wordtune.com/*\\"]}}",true,[["npnbdojkgkbcdfdjlfdmplppdphlhhcf","https://lh3.googleusercontent.com/GHv0Lq9Nb_wxNonJFV0OqInUqhQaTUC1whZ8iQvhWkOs3Bjz7Prv0LtXMIBGBNdfAYdv5GG7ERjX4iug1e4b2qF6Aw","ProWritingAid: Grammar Checker \\u0026 Paraphrasing Tool",4.837947755357423,6393,"https://lh3.googleusercontent.com/2hsQ22tpU5fgLoUAiTNzc1iSBu6e3LR7OnQoBuaJHAVMkmsN1uSjAZtew7nO0NdpkbyGu91lf1SQ3630b17WDEeSCQ","Gain confidence in your writing with the best grammar checker and paraphrasing tool that works wherever you do.","www.prowritingaid.com",true,true,null,["productivity/workflow",null,4],1,true,300000,true],["cpnnabpklgnhjopaenljbbmkejamagel","https://lh3.googleusercontent.com/8kQwFC0s0cK-pfJhXVl-nLh8-KdbSWK3D3ZwJ7r1IQgXZU3P_Swprmwpw8wMMm-FaHpGz4McgBt42MqGcZbbZeVj","Rytr - AI powered writing assistant",3.933333333333333,30,null,"Best AI Writer, Content Generator \\u0026 Writing Assistant.","rytr.me",true,true,null,["productivity/education",null,6],1,true,50000,true],["ieidddkeimflpkghaodhddcmlclcliaa","https://lh3.googleusercontent.com/7GtxXkDgVr6JKdxJLFvxViz08cldXPITCsayqBxMsWMgcl99MxokJfwveQj57Ws_fnt6qvVjXFQ_T5m8uWtsVDg2","ParagraphAI - Write Better, Faster",4.333333333333333,60,"https://lh3.googleusercontent.com/JH2nNh8Sr44Ox_1DXuqp1yXTzrIvXolC2FFrChCJW7tDQwKH0h5IJp2OM6XP5VR4cKbeCbrgIHb7pQM561lyVY6KjA","ParagraphAI is an AI-powered writing tool that crafts perfectly curated content for all your writing needs.","paragraphai.com",true,true,null,["productivity/communication",null,3],1,true,40000,true],["hngnkmianenpifegfoggnkamjnffiobn","https://lh3.googleusercontent.com/hoJxHmFFy8E0-OgAjZOpKe1FGRTWh7vmgRcga8YUhN-vgBaUpyphAdWuB9UmfE3xcAtzLAweRbmnfiu8vEoIPar43AA","Writer: Generative AI",4.403225806451613,62,"https://lh3.googleusercontent.com/JL8YGdaVDzh81Yybs77yJzwgKn4ewHuUnY0fuLN__kPOUiNTzbwwQM5s31PEEgJJZitJQc3tEaUdcQbkaUEbDfrfug","Generative AI in all the places you work","writer.com",true,true,null,["productivity/workflow",null,4],1,true,100000,true],["kljjoeapehcmaphfcjkmbhkinoaopdnd","https://lh3.googleusercontent.com/roLFXs4GSKTU5tAe2MPKk0PwI-CugDF9i3uNN2m4GvyCCJAekXiTqGBqoFL3Yvy0HRYxPbhyPLVfmZj51dNHbTJpYA","HyperWrite - AI Assistant",4.376344086021505,93,"https://lh3.googleusercontent.com/sLiNBc8Yk0lC-_6U4rHyDeUZVm5wJVcQCYdW-AH7LNhk1w5z-WYNFHJcM0wLfYm7Bv8LOjiLQWgPgKcKn70oMOw4Jg","Personal Assistant by HyperWrite is the first AI agent that can operate your browser. It\'s like self-driving mode for the web.","hyperwriteai.com",true,true,null,["productivity/workflow",null,4],1,true,100000,true],["hkfhclakgkhajfogkehjopahbphofpbn","https://lh3.googleusercontent.com/fJ0bPY_A2UqjPWO85jL7iP05o2c8aLUKX_2ro1qpYPPpnLBIIPIT6J4yY1CVmPrp3M0uTOEiFr187mRqUW4S6gGUug","AISEO - AI Writing Companion.",4.769230769230769,221,null,"Get writing superpowers with AISEO\'s advanced AI tools",null,null,true,null,["productivity/workflow",null,4],1,true,10000],["iidnbdjijdkbmajdffnidomddglmieko","https://lh3.googleusercontent.com/duD2Ni0DrGUJY4QjmXL_e8xAGQvnviTvfmFQbRIEHn0RhgP6maLi4TOTZ6sy8XUdxPuyrB1Wam_Mu-PEZCYXS9as","QuillBot: AI Writing and Grammar Checker Tool",4.435275080906149,618,"https://lh3.googleusercontent.com/pnBpODM8qbAK-Y6BsJ_DRXIGyiBy6xozmIEzTJMm-Z3bcT3XpouEuQVeJoBS7Dh6E1I5wY9vXuujEpHnYKfSLYOa","Elevate your writing with QuillBot\'s AI-powered productivity tools: Grammar Checker, Paraphraser, AI writer, Summarizer, and more!","quillbot.com",true,true,null,["productivity/communication",null,3],1,true,3000000,true],["aabfjmnamlihmlicgeoogldnfaaklfon","https://lh3.googleusercontent.com/QQ-wEL4wlrJUIHFdhEp_gqcx9_KvLEpY7kumGRaD1DT1arwbw3IgxtRaQzgVKbXOKUsn_RYnjJGc1HFE10n9VPiCkw","Writecream - AI-powered writing assistant",4.908508691674291,1093,"https://lh3.googleusercontent.com/JjQvzJq5C9jq6aSsm7RO6StMLoPmGmHwC9IMFaNFxXRoFlL4p-bY9rmLdZY-3-CBeMAgGZ5MbT7QNwmk4qwOX75hsA","An A.I-powered app for generating blog articles, YouTube videos \\u0026 podcasts in seconds.","writecream.com",true,true,null,["productivity/tools",null,5],1,true,9000,true],["hihmdflioglieahhkcllmngdmpijboae","https://lh3.googleusercontent.com/BihxYPmQdzsiELaHyFjbnIVt334tktH6AuITxKbjGV-rLmRz3qVdFPyP_Q2ghdXVWs7_0YL5SH9Xibywwa9ERYZCjQ","Scalenut: AI powered writer",4.90625,160,"https://lh3.googleusercontent.com/iDYkt50Or7Yb_ht2LgcJ9MoZynTR49rNTl2qvKNeArXSZZ6CxVZnEHOb0TolZCK28YKDPtJyRgm8BvyHl7i4YA0LRQ","Write, Command, Rephrase, Simplify and multiple other use cases using Content AI from Scalenut","scalenut.com",true,true,null,["productivity/workflow",null,4],1,true,5000,true],["jldbdlmljpigglecmeclifcdhgbjbakk","https://lh3.googleusercontent.com/OOFCGY9tDDExQs8ZMT2cjHGMX2IGU8Fg3yZt_Tp61fuaaE3fo9Fblw4XwwhaYP2KdrkB5bBsXMoEmxNPWWN-FxRJ3s4","Outwrite — Grammar checker \\u0026 rewrite tool",4.547169811320755,106,"https://lh3.googleusercontent.com/7VY0YQm2XJrIWSlbmHEeJktjCZiNGlPohsZM8AxUPS2cN1kLMR-UuBPzyXCChtql6BM2_Yzh4S3w7qeNnTEAk5qslgE","Write perfect content with Outwrite. Check spelling \\u0026 grammar, improve writing style, find synonyms and paraphrase sentences.","outwrite.com",true,true,null,["productivity/education",null,6],1,true,50000,true],["ddlbpiadoechcolndfeaonajmngmhblj","https://lh3.googleusercontent.com/5HmiTnv6h8QmF7rYjg5qe1BYToXRjB8ISCc081oJ6hBGjRPi-sPIOuhUZd_axRZ7dvPFHEeWUPJR5LDgnXnty2jOV6M","Compose AI: AI-powered Writing Tool",4.116279069767442,215,"https://lh3.googleusercontent.com/QcGewhdyh3hz6fPUvgLn2gvGHRAOvQhxS9kE-w4B04MWYyBRGD3Wsk_Y41kGvygG3Y8UQDL_GhWtsFZEGV9Qngzmcw","Accelerate your writing with AI","compose.ai",true,true,null,["productivity/communication",null,3],1,true,400000,true],["immpagioobbjjlckfakmgpnbhheamcbi","https://lh3.googleusercontent.com/3ABO0l1O_Y5GZmf2vpvEFyJcBtetBkr3NKnVFPn_cjfuFiD9xqelb62ZSXbbsodSA7V1d8IeUfSKpmqpu9R6gi8E9A","InstaText",4.666666666666667,12,"https://lh3.googleusercontent.com/xjiVyrdIxqqhDV0bLol3iBuXXRjsS2QvXY7GMmDCBa1UnLYM1NQjKZcv58udTMvFY2a88xRkgaAC2q2UYs6nTgOcx7Q","Write like a native speaker.","instatext.io",true,true,null,["productivity/workflow",null,4],1,true,100000,true]],null,null,null,null,"77",null,1,null,null,null,"https://www.wordtune.com/privacy-policy",null,null,true,2], sideChannel: {}});'
        expected = [['nllcnknpjnininklegdoijpljgdjkijc', 'https://lh3.googleusercontent.com/u6vAjFVGNe_rMEaHitlgzea-XtilYUbb6KvWL2TjxUXeoUYMlVUNiwawiyPjUMQSYktWyc6QDBfFvqY5ergeTn2IqQ', 'Wordtune: Generative AI productivity platform', 4.619027661357921, 2386, 'https://lh3.googleusercontent.com/2huOPk4yAIyNFMvSF2vq1XtDolNH8db_cI_x5adgamPE_soavBrQqBmeD2ZpwEZqtETZ6pJPTa5XUVF5onG5xHfn', "Unleash your professional potential with Wordtune's GenAI tools for work.", 'wordtune.com', True, True, None, ['productivity/workflow', None, 4], 1, True, 1000000, True], None, None, None, None, [[1, 'https://lh3.googleusercontent.com/mxlFMKwQQ9GCTRfr6pJ0qASX52lFD0km05WLVpD7lslBXMKdeNnnfQr5c148ucEjctkFgGr3WKvU3jZSx2OzzCiN'], [1, 'https://lh3.googleusercontent.com/7EhbuCkFih0BTfpZL6FWnJvABK2IFOyzZirVt7aZJDUScxBtz0f_GLB_LNfn2sp5_lWt0E5iiS5xvQaoCIOH7bQDiQ'], [1, 'https://lh3.googleusercontent.com/nuDyCh_E7u5KxSObu89PRkH9tE9YL_S-Zje6WrdC_Cdw3KIuDb3K8Ai3ZdZhajQnO4vP3cjFvKxvvduHv3DU7aLbfDI'], [1, 'https://lh3.googleusercontent.com/FIZE3yDBWweOm3EQ9OnXynuAPkaNbB7olSRjEccggQic3aomhTlIRjoeDc2iV69TqlDPNsU-uCIFCz75xY-yikprVA']], "Busy professionals have tons of work to get through. Some accept the frustration while others choose Wordtune to speed up their tasks. \n\nWordtune is a Generative AI platform for work productivity. By using reliable Generative AI, professionals from all fields can grow their careers and stand out at work. Whether you’re writing emails, creating documents or sending instant messages to colleagues or clients, Wordtune perfects your writing while streamlining your work using AI. \n\nTake your productivity to new heights with the Wordtune Chrome extension — available on all your favorite websites and web apps. \n\nWordtune’s latest and and most advanced set of GenAI tools for work include: \n\n➡️ Rewrite: Perfect your writing with Wordtune Rewrite — from a single word to an entire page.\n\n➡️ Summarization: Cut reading and watching time in half by summarizing YouTube videos, blog articles, PDFs and more. \n\n➡️ AI writing: Enhance your productivity by writing faster with AI suggestions — all while remaining true to your unique style.\n\n➡️ Corrections and recommendations: Write like the professional you are with AI recommendations. Unleash your thoughts without worrying about grammar or spelling mistakes.\n\n➡️ Smart translation: Choose from 10 languages to Smart translate to English. \n\n➡️ Tones and length: Make sure your message hits the right note — change your tone from professional to casual in just a click. Effortlessly reduce or increase word count depending on your needs. \n\nUse the Wordtune anywhere you need it: Whether you're on your desktop, mobile device or using your favorite apps, Wordtune is there for you.\n\nWe’re constantly working on updates and improvements to make your Wordtune experience even better. If you have questions or feedback, we would love to hear from you at help@wordtune.com.", [1, 5, 9], True, 1, ['help@wordtune.com', '124 Ibn Gabirol St.\nTel Aviv 6203854\nIL', None, True, None, 'Wordtune', None, 'AI21 Labs Ltd.'], None, None, '6.0.2', [1712055462, 326089000], '16.65MiB', ['English'], None, None, None, '{\n"update_url": "https://clients2.google.com/service/update2/crx",\n"manifest_version":2,"name":"Wordtune: Generative AI productivity platform","version":"6.0.2","description":"Unleash your professional potential with Wordtune\'s GenAI tools for work.","icons":{"48":"media/logo-48.png","128":"media/logo-128.png"},"background":{"scripts":["background.js"],"persistent":false},"content_scripts":[{"matches":["<all_urls>"],"js":["bundles/writingMonitor.js"],"run_at":"document_idle","all_frames":true,"css":[]},{"all_frames":false,"js":["bundles/enableCanvasAnnotations.js"],"matches":["*://docs.google.com/document/*"],"run_at":"document_start"},{"all_frames":false,"js":["bundles/injectExtensionInstalled.js"],"matches":["<all_urls>"],"run_at":"document_start"},{"all_frames":false,"js":["bundles/overrideCanvas.js"],"matches":["*://docs.google.com/document/*"],"run_at":"document_end"},{"matches":["<all_urls>"],"all_frames":true,"js":["bundles/content.js"],"run_at":"document_end","css":["fonts/fonts.css"]},{"matches":["<all_urls>"],"js":["read/content.js"],"all_frames":false,"css":["read/media/OpenSans.css","read/media/SofiaPro.css"]}],"browser_action":{"default_popup":"html/popup.html"},"minimum_chrome_version":"77","permissions":["alarms","cookies","storage","*://*/*","https://*.wordtune.com/*"],"optional_permissions":["clipboardRead","clipboardWrite"],"web_accessible_resources":["media/*.png","assets/*.png","assets/*.eot","assets/*.woff","assets/*.woff2","assets/*.ttf","assets/*.svg","assets/*.gif","fonts/Inter/*.woff","fonts/Inter/*.woff2","html/*.html","media/webFonts/*.woff","media/webFonts/*.woff2","read/media/*.woff","read/media/*.woff2","read/media/*.css"],"content_security_policy":"script-src \'self\' https://www.gstatic.com/ https://*.firebaseio.com https://www.googleapis.com; object-src \'self\'","externally_connectable":{"matches":["https://app.wordtune.com/*","https://www.wordtune.com/*"]}}', True, [['npnbdojkgkbcdfdjlfdmplppdphlhhcf', 'https://lh3.googleusercontent.com/GHv0Lq9Nb_wxNonJFV0OqInUqhQaTUC1whZ8iQvhWkOs3Bjz7Prv0LtXMIBGBNdfAYdv5GG7ERjX4iug1e4b2qF6Aw', 'ProWritingAid: Grammar Checker & Paraphrasing Tool', 4.837947755357423, 6393, 'https://lh3.googleusercontent.com/2hsQ22tpU5fgLoUAiTNzc1iSBu6e3LR7OnQoBuaJHAVMkmsN1uSjAZtew7nO0NdpkbyGu91lf1SQ3630b17WDEeSCQ', 'Gain confidence in your writing with the best grammar checker and paraphrasing tool that works wherever you do.', 'www.prowritingaid.com', True, True, None, ['productivity/workflow', None, 4], 1, True, 300000, True], ['cpnnabpklgnhjopaenljbbmkejamagel', 'https://lh3.googleusercontent.com/8kQwFC0s0cK-pfJhXVl-nLh8-KdbSWK3D3ZwJ7r1IQgXZU3P_Swprmwpw8wMMm-FaHpGz4McgBt42MqGcZbbZeVj', 'Rytr - AI powered writing assistant', 3.933333333333333, 30, None, 'Best AI Writer, Content Generator & Writing Assistant.', 'rytr.me', True, True, None, ['productivity/education', None, 6], 1, True, 50000, True], ['ieidddkeimflpkghaodhddcmlclcliaa', 'https://lh3.googleusercontent.com/7GtxXkDgVr6JKdxJLFvxViz08cldXPITCsayqBxMsWMgcl99MxokJfwveQj57Ws_fnt6qvVjXFQ_T5m8uWtsVDg2', 'ParagraphAI - Write Better, Faster', 4.333333333333333, 60, 'https://lh3.googleusercontent.com/JH2nNh8Sr44Ox_1DXuqp1yXTzrIvXolC2FFrChCJW7tDQwKH0h5IJp2OM6XP5VR4cKbeCbrgIHb7pQM561lyVY6KjA', 'ParagraphAI is an AI-powered writing tool that crafts perfectly curated content for all your writing needs.', 'paragraphai.com', True, True, None, ['productivity/communication', None, 3], 1, True, 40000, True], ['hngnkmianenpifegfoggnkamjnffiobn', 'https://lh3.googleusercontent.com/hoJxHmFFy8E0-OgAjZOpKe1FGRTWh7vmgRcga8YUhN-vgBaUpyphAdWuB9UmfE3xcAtzLAweRbmnfiu8vEoIPar43AA', 'Writer: Generative AI', 4.403225806451613, 62, 'https://lh3.googleusercontent.com/JL8YGdaVDzh81Yybs77yJzwgKn4ewHuUnY0fuLN__kPOUiNTzbwwQM5s31PEEgJJZitJQc3tEaUdcQbkaUEbDfrfug', 'Generative AI in all the places you work', 'writer.com', True, True, None, ['productivity/workflow', None, 4], 1, True, 100000, True], ['kljjoeapehcmaphfcjkmbhkinoaopdnd', 'https://lh3.googleusercontent.com/roLFXs4GSKTU5tAe2MPKk0PwI-CugDF9i3uNN2m4GvyCCJAekXiTqGBqoFL3Yvy0HRYxPbhyPLVfmZj51dNHbTJpYA', 'HyperWrite - AI Assistant', 4.376344086021505, 93, 'https://lh3.googleusercontent.com/sLiNBc8Yk0lC-_6U4rHyDeUZVm5wJVcQCYdW-AH7LNhk1w5z-WYNFHJcM0wLfYm7Bv8LOjiLQWgPgKcKn70oMOw4Jg', "Personal Assistant by HyperWrite is the first AI agent that can operate your browser. It's like self-driving mode for the web.", 'hyperwriteai.com', True, True, None, ['productivity/workflow', None, 4], 1, True, 100000, True], ['hkfhclakgkhajfogkehjopahbphofpbn', 'https://lh3.googleusercontent.com/fJ0bPY_A2UqjPWO85jL7iP05o2c8aLUKX_2ro1qpYPPpnLBIIPIT6J4yY1CVmPrp3M0uTOEiFr187mRqUW4S6gGUug', 'AISEO - AI Writing Companion.', 4.769230769230769, 221, None, "Get writing superpowers with AISEO's advanced AI tools", None, None, True, None, ['productivity/workflow', None, 4], 1, True, 10000], ['iidnbdjijdkbmajdffnidomddglmieko', 'https://lh3.googleusercontent.com/duD2Ni0DrGUJY4QjmXL_e8xAGQvnviTvfmFQbRIEHn0RhgP6maLi4TOTZ6sy8XUdxPuyrB1Wam_Mu-PEZCYXS9as', 'QuillBot: AI Writing and Grammar Checker Tool', 4.435275080906149, 618, 'https://lh3.googleusercontent.com/pnBpODM8qbAK-Y6BsJ_DRXIGyiBy6xozmIEzTJMm-Z3bcT3XpouEuQVeJoBS7Dh6E1I5wY9vXuujEpHnYKfSLYOa', "Elevate your writing with QuillBot's AI-powered productivity tools: Grammar Checker, Paraphraser, AI writer, Summarizer, and more!", 'quillbot.com', True, True, None, ['productivity/communication', None, 3], 1, True, 3000000, True], ['aabfjmnamlihmlicgeoogldnfaaklfon', 'https://lh3.googleusercontent.com/QQ-wEL4wlrJUIHFdhEp_gqcx9_KvLEpY7kumGRaD1DT1arwbw3IgxtRaQzgVKbXOKUsn_RYnjJGc1HFE10n9VPiCkw', 'Writecream - AI-powered writing assistant', 4.908508691674291, 1093, 'https://lh3.googleusercontent.com/JjQvzJq5C9jq6aSsm7RO6StMLoPmGmHwC9IMFaNFxXRoFlL4p-bY9rmLdZY-3-CBeMAgGZ5MbT7QNwmk4qwOX75hsA', 'An A.I-powered app for generating blog articles, YouTube videos & podcasts in seconds.', 'writecream.com', True, True, None, ['productivity/tools', None, 5], 1, True, 9000, True], ['hihmdflioglieahhkcllmngdmpijboae', 'https://lh3.googleusercontent.com/BihxYPmQdzsiELaHyFjbnIVt334tktH6AuITxKbjGV-rLmRz3qVdFPyP_Q2ghdXVWs7_0YL5SH9Xibywwa9ERYZCjQ', 'Scalenut: AI powered writer', 4.90625, 160, 'https://lh3.googleusercontent.com/iDYkt50Or7Yb_ht2LgcJ9MoZynTR49rNTl2qvKNeArXSZZ6CxVZnEHOb0TolZCK28YKDPtJyRgm8BvyHl7i4YA0LRQ', 'Write, Command, Rephrase, Simplify and multiple other use cases using Content AI from Scalenut', 'scalenut.com', True, True, None, ['productivity/workflow', None, 4], 1, True, 5000, True], ['jldbdlmljpigglecmeclifcdhgbjbakk', 'https://lh3.googleusercontent.com/OOFCGY9tDDExQs8ZMT2cjHGMX2IGU8Fg3yZt_Tp61fuaaE3fo9Fblw4XwwhaYP2KdrkB5bBsXMoEmxNPWWN-FxRJ3s4', 'Outwrite — Grammar checker & rewrite tool', 4.547169811320755, 106, 'https://lh3.googleusercontent.com/7VY0YQm2XJrIWSlbmHEeJktjCZiNGlPohsZM8AxUPS2cN1kLMR-UuBPzyXCChtql6BM2_Yzh4S3w7qeNnTEAk5qslgE', 'Write perfect content with Outwrite. Check spelling & grammar, improve writing style, find synonyms and paraphrase sentences.', 'outwrite.com', True, True, None, ['productivity/education', None, 6], 1, True, 50000, True], ['ddlbpiadoechcolndfeaonajmngmhblj', 'https://lh3.googleusercontent.com/5HmiTnv6h8QmF7rYjg5qe1BYToXRjB8ISCc081oJ6hBGjRPi-sPIOuhUZd_axRZ7dvPFHEeWUPJR5LDgnXnty2jOV6M', 'Compose AI: AI-powered Writing Tool', 4.116279069767442, 215, 'https://lh3.googleusercontent.com/QcGewhdyh3hz6fPUvgLn2gvGHRAOvQhxS9kE-w4B04MWYyBRGD3Wsk_Y41kGvygG3Y8UQDL_GhWtsFZEGV9Qngzmcw', 'Accelerate your writing with AI', 'compose.ai', True, True, None, ['productivity/communication', None, 3], 1, True, 400000, True], ['immpagioobbjjlckfakmgpnbhheamcbi', 'https://lh3.googleusercontent.com/3ABO0l1O_Y5GZmf2vpvEFyJcBtetBkr3NKnVFPn_cjfuFiD9xqelb62ZSXbbsodSA7V1d8IeUfSKpmqpu9R6gi8E9A', 'InstaText', 4.666666666666667, 12, 'https://lh3.googleusercontent.com/xjiVyrdIxqqhDV0bLol3iBuXXRjsS2QvXY7GMmDCBa1UnLYM1NQjKZcv58udTMvFY2a88xRkgaAC2q2UYs6nTgOcx7Q', 'Write like a native speaker.', 'instatext.io', True, True, None, ['productivity/workflow', None, 4], 1, True, 100000, True]], None, None, None, None, '77', None, 1, None, None, None, 'https://www.wordtune.com/privacy-policy', None, None, True, 2]

        self.assertEqual(script_text_to_json(script_text), expected)

    def test_format_script_data(self):
        script_data = [['nllcnknpjnininklegdoijpljgdjkijc', 'https://lh3.googleusercontent.com/u6vAjFVGNe_rMEaHitlgzea-XtilYUbb6KvWL2TjxUXeoUYMlVUNiwawiyPjUMQSYktWyc6QDBfFvqY5ergeTn2IqQ', 'Wordtune: Generative AI productivity platform', 4.619027661357921, 2386, 'https://lh3.googleusercontent.com/2huOPk4yAIyNFMvSF2vq1XtDolNH8db_cI_x5adgamPE_soavBrQqBmeD2ZpwEZqtETZ6pJPTa5XUVF5onG5xHfn', "Unleash your professional potential with Wordtune's GenAI tools for work.", 'wordtune.com', True, True, None, ['productivity/workflow', None, 4], 1, True, 1000000, True], None, None, None, None, [[1, 'https://lh3.googleusercontent.com/mxlFMKwQQ9GCTRfr6pJ0qASX52lFD0km05WLVpD7lslBXMKdeNnnfQr5c148ucEjctkFgGr3WKvU3jZSx2OzzCiN'], [1, 'https://lh3.googleusercontent.com/7EhbuCkFih0BTfpZL6FWnJvABK2IFOyzZirVt7aZJDUScxBtz0f_GLB_LNfn2sp5_lWt0E5iiS5xvQaoCIOH7bQDiQ'], [1, 'https://lh3.googleusercontent.com/nuDyCh_E7u5KxSObu89PRkH9tE9YL_S-Zje6WrdC_Cdw3KIuDb3K8Ai3ZdZhajQnO4vP3cjFvKxvvduHv3DU7aLbfDI'], [1, 'https://lh3.googleusercontent.com/FIZE3yDBWweOm3EQ9OnXynuAPkaNbB7olSRjEccggQic3aomhTlIRjoeDc2iV69TqlDPNsU-uCIFCz75xY-yikprVA']], "Busy professionals have tons of work to get through. Some accept the frustration while others choose Wordtune to speed up their tasks. \n\nWordtune is a Generative AI platform for work productivity. By using reliable Generative AI, professionals from all fields can grow their careers and stand out at work. Whether you’re writing emails, creating documents or sending instant messages to colleagues or clients, Wordtune perfects your writing while streamlining your work using AI. \n\nTake your productivity to new heights with the Wordtune Chrome extension — available on all your favorite websites and web apps. \n\nWordtune’s latest and and most advanced set of GenAI tools for work include: \n\n➡️ Rewrite: Perfect your writing with Wordtune Rewrite — from a single word to an entire page.\n\n➡️ Summarization: Cut reading and watching time in half by summarizing YouTube videos, blog articles, PDFs and more. \n\n➡️ AI writing: Enhance your productivity by writing faster with AI suggestions — all while remaining true to your unique style.\n\n➡️ Corrections and recommendations: Write like the professional you are with AI recommendations. Unleash your thoughts without worrying about grammar or spelling mistakes.\n\n➡️ Smart translation: Choose from 10 languages to Smart translate to English. \n\n➡️ Tones and length: Make sure your message hits the right note — change your tone from professional to casual in just a click. Effortlessly reduce or increase word count depending on your needs. \n\nUse the Wordtune anywhere you need it: Whether you're on your desktop, mobile device or using your favorite apps, Wordtune is there for you.\n\nWe’re constantly working on updates and improvements to make your Wordtune experience even better. If you have questions or feedback, we would love to hear from you at help@wordtune.com.", [1, 5, 9], True, 1, ['help@wordtune.com', '124 Ibn Gabirol St.\nTel Aviv 6203854\nIL', None, True, None, 'Wordtune', None, 'AI21 Labs Ltd.'], None, None, '6.0.2', [1712055462, 326089000], '16.65MiB', ['English'], None, None, None, '{\n"update_url": "https://clients2.google.com/service/update2/crx",\n"manifest_version":2,"name":"Wordtune: Generative AI productivity platform","version":"6.0.2","description":"Unleash your professional potential with Wordtune\'s GenAI tools for work.","icons":{"48":"media/logo-48.png","128":"media/logo-128.png"},"background":{"scripts":["background.js"],"persistent":false},"content_scripts":[{"matches":["<all_urls>"],"js":["bundles/writingMonitor.js"],"run_at":"document_idle","all_frames":true,"css":[]},{"all_frames":false,"js":["bundles/enableCanvasAnnotations.js"],"matches":["*://docs.google.com/document/*"],"run_at":"document_start"},{"all_frames":false,"js":["bundles/injectExtensionInstalled.js"],"matches":["<all_urls>"],"run_at":"document_start"},{"all_frames":false,"js":["bundles/overrideCanvas.js"],"matches":["*://docs.google.com/document/*"],"run_at":"document_end"},{"matches":["<all_urls>"],"all_frames":true,"js":["bundles/content.js"],"run_at":"document_end","css":["fonts/fonts.css"]},{"matches":["<all_urls>"],"js":["read/content.js"],"all_frames":false,"css":["read/media/OpenSans.css","read/media/SofiaPro.css"]}],"browser_action":{"default_popup":"html/popup.html"},"minimum_chrome_version":"77","permissions":["alarms","cookies","storage","*://*/*","https://*.wordtune.com/*"],"optional_permissions":["clipboardRead","clipboardWrite"],"web_accessible_resources":["media/*.png","assets/*.png","assets/*.eot","assets/*.woff","assets/*.woff2","assets/*.ttf","assets/*.svg","assets/*.gif","fonts/Inter/*.woff","fonts/Inter/*.woff2","html/*.html","media/webFonts/*.woff","media/webFonts/*.woff2","read/media/*.woff","read/media/*.woff2","read/media/*.css"],"content_security_policy":"script-src \'self\' https://www.gstatic.com/ https://*.firebaseio.com https://www.googleapis.com; object-src \'self\'","externally_connectable":{"matches":["https://app.wordtune.com/*","https://www.wordtune.com/*"]}}', True, [['npnbdojkgkbcdfdjlfdmplppdphlhhcf', 'https://lh3.googleusercontent.com/GHv0Lq9Nb_wxNonJFV0OqInUqhQaTUC1whZ8iQvhWkOs3Bjz7Prv0LtXMIBGBNdfAYdv5GG7ERjX4iug1e4b2qF6Aw', 'ProWritingAid: Grammar Checker & Paraphrasing Tool', 4.837947755357423, 6393, 'https://lh3.googleusercontent.com/2hsQ22tpU5fgLoUAiTNzc1iSBu6e3LR7OnQoBuaJHAVMkmsN1uSjAZtew7nO0NdpkbyGu91lf1SQ3630b17WDEeSCQ', 'Gain confidence in your writing with the best grammar checker and paraphrasing tool that works wherever you do.', 'www.prowritingaid.com', True, True, None, ['productivity/workflow', None, 4], 1, True, 300000, True], ['cpnnabpklgnhjopaenljbbmkejamagel', 'https://lh3.googleusercontent.com/8kQwFC0s0cK-pfJhXVl-nLh8-KdbSWK3D3ZwJ7r1IQgXZU3P_Swprmwpw8wMMm-FaHpGz4McgBt42MqGcZbbZeVj', 'Rytr - AI powered writing assistant', 3.933333333333333, 30, None, 'Best AI Writer, Content Generator & Writing Assistant.', 'rytr.me', True, True, None, ['productivity/education', None, 6], 1, True, 50000, True], ['ieidddkeimflpkghaodhddcmlclcliaa', 'https://lh3.googleusercontent.com/7GtxXkDgVr6JKdxJLFvxViz08cldXPITCsayqBxMsWMgcl99MxokJfwveQj57Ws_fnt6qvVjXFQ_T5m8uWtsVDg2', 'ParagraphAI - Write Better, Faster', 4.333333333333333, 60, 'https://lh3.googleusercontent.com/JH2nNh8Sr44Ox_1DXuqp1yXTzrIvXolC2FFrChCJW7tDQwKH0h5IJp2OM6XP5VR4cKbeCbrgIHb7pQM561lyVY6KjA', 'ParagraphAI is an AI-powered writing tool that crafts perfectly curated content for all your writing needs.', 'paragraphai.com', True, True, None, ['productivity/communication', None, 3], 1, True, 40000, True], ['hngnkmianenpifegfoggnkamjnffiobn', 'https://lh3.googleusercontent.com/hoJxHmFFy8E0-OgAjZOpKe1FGRTWh7vmgRcga8YUhN-vgBaUpyphAdWuB9UmfE3xcAtzLAweRbmnfiu8vEoIPar43AA', 'Writer: Generative AI', 4.403225806451613, 62, 'https://lh3.googleusercontent.com/JL8YGdaVDzh81Yybs77yJzwgKn4ewHuUnY0fuLN__kPOUiNTzbwwQM5s31PEEgJJZitJQc3tEaUdcQbkaUEbDfrfug', 'Generative AI in all the places you work', 'writer.com', True, True, None, ['productivity/workflow', None, 4], 1, True, 100000, True], ['kljjoeapehcmaphfcjkmbhkinoaopdnd', 'https://lh3.googleusercontent.com/roLFXs4GSKTU5tAe2MPKk0PwI-CugDF9i3uNN2m4GvyCCJAekXiTqGBqoFL3Yvy0HRYxPbhyPLVfmZj51dNHbTJpYA', 'HyperWrite - AI Assistant', 4.376344086021505, 93, 'https://lh3.googleusercontent.com/sLiNBc8Yk0lC-_6U4rHyDeUZVm5wJVcQCYdW-AH7LNhk1w5z-WYNFHJcM0wLfYm7Bv8LOjiLQWgPgKcKn70oMOw4Jg', "Personal Assistant by HyperWrite is the first AI agent that can operate your browser. It's like self-driving mode for the web.", 'hyperwriteai.com', True, True, None, ['productivity/workflow', None, 4], 1, True, 100000, True], ['hkfhclakgkhajfogkehjopahbphofpbn', 'https://lh3.googleusercontent.com/fJ0bPY_A2UqjPWO85jL7iP05o2c8aLUKX_2ro1qpYPPpnLBIIPIT6J4yY1CVmPrp3M0uTOEiFr187mRqUW4S6gGUug', 'AISEO - AI Writing Companion.', 4.769230769230769, 221, None, "Get writing superpowers with AISEO's advanced AI tools", None, None, True, None, ['productivity/workflow', None, 4], 1, True, 10000], ['iidnbdjijdkbmajdffnidomddglmieko', 'https://lh3.googleusercontent.com/duD2Ni0DrGUJY4QjmXL_e8xAGQvnviTvfmFQbRIEHn0RhgP6maLi4TOTZ6sy8XUdxPuyrB1Wam_Mu-PEZCYXS9as', 'QuillBot: AI Writing and Grammar Checker Tool', 4.435275080906149, 618, 'https://lh3.googleusercontent.com/pnBpODM8qbAK-Y6BsJ_DRXIGyiBy6xozmIEzTJMm-Z3bcT3XpouEuQVeJoBS7Dh6E1I5wY9vXuujEpHnYKfSLYOa', "Elevate your writing with QuillBot's AI-powered productivity tools: Grammar Checker, Paraphraser, AI writer, Summarizer, and more!", 'quillbot.com', True, True, None, ['productivity/communication', None, 3], 1, True, 3000000, True], ['aabfjmnamlihmlicgeoogldnfaaklfon', 'https://lh3.googleusercontent.com/QQ-wEL4wlrJUIHFdhEp_gqcx9_KvLEpY7kumGRaD1DT1arwbw3IgxtRaQzgVKbXOKUsn_RYnjJGc1HFE10n9VPiCkw', 'Writecream - AI-powered writing assistant', 4.908508691674291, 1093, 'https://lh3.googleusercontent.com/JjQvzJq5C9jq6aSsm7RO6StMLoPmGmHwC9IMFaNFxXRoFlL4p-bY9rmLdZY-3-CBeMAgGZ5MbT7QNwmk4qwOX75hsA', 'An A.I-powered app for generating blog articles, YouTube videos & podcasts in seconds.', 'writecream.com', True, True, None, ['productivity/tools', None, 5], 1, True, 9000, True], ['hihmdflioglieahhkcllmngdmpijboae', 'https://lh3.googleusercontent.com/BihxYPmQdzsiELaHyFjbnIVt334tktH6AuITxKbjGV-rLmRz3qVdFPyP_Q2ghdXVWs7_0YL5SH9Xibywwa9ERYZCjQ', 'Scalenut: AI powered writer', 4.90625, 160, 'https://lh3.googleusercontent.com/iDYkt50Or7Yb_ht2LgcJ9MoZynTR49rNTl2qvKNeArXSZZ6CxVZnEHOb0TolZCK28YKDPtJyRgm8BvyHl7i4YA0LRQ', 'Write, Command, Rephrase, Simplify and multiple other use cases using Content AI from Scalenut', 'scalenut.com', True, True, None, ['productivity/workflow', None, 4], 1, True, 5000, True], ['jldbdlmljpigglecmeclifcdhgbjbakk', 'https://lh3.googleusercontent.com/OOFCGY9tDDExQs8ZMT2cjHGMX2IGU8Fg3yZt_Tp61fuaaE3fo9Fblw4XwwhaYP2KdrkB5bBsXMoEmxNPWWN-FxRJ3s4', 'Outwrite — Grammar checker & rewrite tool', 4.547169811320755, 106, 'https://lh3.googleusercontent.com/7VY0YQm2XJrIWSlbmHEeJktjCZiNGlPohsZM8AxUPS2cN1kLMR-UuBPzyXCChtql6BM2_Yzh4S3w7qeNnTEAk5qslgE', 'Write perfect content with Outwrite. Check spelling & grammar, improve writing style, find synonyms and paraphrase sentences.', 'outwrite.com', True, True, None, ['productivity/education', None, 6], 1, True, 50000, True], ['ddlbpiadoechcolndfeaonajmngmhblj', 'https://lh3.googleusercontent.com/5HmiTnv6h8QmF7rYjg5qe1BYToXRjB8ISCc081oJ6hBGjRPi-sPIOuhUZd_axRZ7dvPFHEeWUPJR5LDgnXnty2jOV6M', 'Compose AI: AI-powered Writing Tool', 4.116279069767442, 215, 'https://lh3.googleusercontent.com/QcGewhdyh3hz6fPUvgLn2gvGHRAOvQhxS9kE-w4B04MWYyBRGD3Wsk_Y41kGvygG3Y8UQDL_GhWtsFZEGV9Qngzmcw', 'Accelerate your writing with AI', 'compose.ai', True, True, None, ['productivity/communication', None, 3], 1, True, 400000, True], ['immpagioobbjjlckfakmgpnbhheamcbi', 'https://lh3.googleusercontent.com/3ABO0l1O_Y5GZmf2vpvEFyJcBtetBkr3NKnVFPn_cjfuFiD9xqelb62ZSXbbsodSA7V1d8IeUfSKpmqpu9R6gi8E9A', 'InstaText', 4.666666666666667, 12, 'https://lh3.googleusercontent.com/xjiVyrdIxqqhDV0bLol3iBuXXRjsS2QvXY7GMmDCBa1UnLYM1NQjKZcv58udTMvFY2a88xRkgaAC2q2UYs6nTgOcx7Q', 'Write like a native speaker.', 'instatext.io', True, True, None, ['productivity/workflow', None, 4], 1, True, 100000, True]], None, None, None, None, '77', None, 1, None, None, None, 'https://www.wordtune.com/privacy-policy', None, None, True, 2]
        expected = {
            "id": "nllcnknpjnininklegdoijpljgdjkijc",
            "title": "Wordtune: Generative AI productivity platform",
            "type": "Extension",
            "icon": "https://lh3.googleusercontent.com/u6vAjFVGNe_rMEaHitlgzea-XtilYUbb6KvWL2TjxUXeoUYMlVUNiwawiyPjUMQSYktWyc6QDBfFvqY5ergeTn2IqQ",
            "small_promo_tile": "https://lh3.googleusercontent.com/2huOPk4yAIyNFMvSF2vq1XtDolNH8db_cI_x5adgamPE_soavBrQqBmeD2ZpwEZqtETZ6pJPTa5XUVF5onG5xHfn",
            "website_owner": "wordtune.com",
            "created_by_the_website_owner": True,
            "rating": 4.619027661357921,
            "rating_count": 2386,
            "category": "productivity/workflow",
            "users": 1000000,
            "screenshots": [
                "https://lh3.googleusercontent.com/mxlFMKwQQ9GCTRfr6pJ0qASX52lFD0km05WLVpD7lslBXMKdeNnnfQr5c148ucEjctkFgGr3WKvU3jZSx2OzzCiN",
                "https://lh3.googleusercontent.com/7EhbuCkFih0BTfpZL6FWnJvABK2IFOyzZirVt7aZJDUScxBtz0f_GLB_LNfn2sp5_lWt0E5iiS5xvQaoCIOH7bQDiQ",
                "https://lh3.googleusercontent.com/nuDyCh_E7u5KxSObu89PRkH9tE9YL_S-Zje6WrdC_Cdw3KIuDb3K8Ai3ZdZhajQnO4vP3cjFvKxvvduHv3DU7aLbfDI",
                "https://lh3.googleusercontent.com/FIZE3yDBWweOm3EQ9OnXynuAPkaNbB7olSRjEccggQic3aomhTlIRjoeDc2iV69TqlDPNsU-uCIFCz75xY-yikprVA"
            ],
            "overview": "Busy professionals have tons of work to get through. Some accept the frustration while others choose Wordtune to speed up their tasks. \n\nWordtune is a Generative AI platform for work productivity. By using reliable Generative AI, professionals from all fields can grow their careers and stand out at work. Whether you’re writing emails, creating documents or sending instant messages to colleagues or clients, Wordtune perfects your writing while streamlining your work using AI. \n\nTake your productivity to new heights with the Wordtune Chrome extension — available on all your favorite websites and web apps. \n\nWordtune’s latest and and most advanced set of GenAI tools for work include: \n\n➡\uFE0F Rewrite: Perfect your writing with Wordtune Rewrite — from a single word to an entire page.\n\n➡\uFE0F Summarization: Cut reading and watching time in half by summarizing YouTube videos, blog articles, PDFs and more. \n\n➡\uFE0F AI writing: Enhance your productivity by writing faster with AI suggestions — all while remaining true to your unique style.\n\n➡\uFE0F Corrections and recommendations: Write like the professional you are with AI recommendations. Unleash your thoughts without worrying about grammar or spelling mistakes.\n\n➡\uFE0F Smart translation: Choose from 10 languages to Smart translate to English. \n\n➡\uFE0F Tones and length: Make sure your message hits the right note — change your tone from professional to casual in just a click. Effortlessly reduce or increase word count depending on your needs. \n\nUse the Wordtune anywhere you need it: Whether you're on your desktop, mobile device or using your favorite apps, Wordtune is there for you.\n\nWe’re constantly working on updates and improvements to make your Wordtune experience even better. If you have questions or feedback, we would love to hear from you at help@wordtune.com.",
            "version": "6.0.2",
            "size": "16.65MiB",
            "languages": [
                "English"
            ],
            "last_updated": 1712055462,
            "developer": {
                "name": "Wordtune",
                "address": "AI21 Labs Ltd.\n124 Ibn Gabirol St.\nTel Aviv 6203854\nIL",
                "website": "wordtune.com",
                "email": "help@wordtune.com",
                "trader": True
            }
        }
        self.assertEqual(format_script_data(script_data), expected)

    def load_manifest(self):
        manifest_raw = "{\n\"update_url\": \"https://clients2.google.com/service/update2/crx\",\n\n  \"manifest_version\": 2,\n  \"name\": \"Tweaks for TopMeteo.eu\",\n  \"description\": \"Usability enhancements for topmeteo.eu\",\n  \"version\": \"2.3\",\n  \"content_scripts\": [\n    {\n      \"matches\": [\"https://*.topmeteo.eu/*\"],\n      \"js\": [\"topmeteo.js\"],\n      \"run_at\": \"document_end\"\n    }\n  ]\n}\n"
        load_manifest(manifest_raw)

    def load_manifest_BOM(self):
        manifest_raw = "\ufeff{\n\"update_url\":\"http://clients2.google.com/service/update2/crx\",\"version\":\"2.20\",\"name\":\"СС theme by wow23\",\"description\":\"best anime ever?!\\r\\n\",\"theme\":{\"images\":{\"theme_frame\":\"images\\/theme_frame.png\",\"theme_toolbar\":\"images\\/theme_toolbar.png\",\"theme_tab_background\":\"images\\/theme_tab_background.png\",\"theme_ntp_background\":\"images\\/theme_ntp_background.png\"},\"colors\":{\"frame\":[174,212,116],\"frame_inactive\":[174,212,116],\"frame_incognito\":[100,122,67],\"frame_incognito_inactive\":[100,122,67],\"toolbar\":[174,212,116],\"tab_text\":[0,0,0],\"tab_background_text\":[115,115,115],\"bookmark_text\":[0,0,0],\"ntp_background\":[255,255,255],\"ntp_text\":[0,0,0],\"ntp_link\":[0,0,0],\"ntp_header\":[174,212,116],\"ntp_section\":[226,238,208],\"ntp_section_text\":[174,212,116],\"ntp_section_link\":[0,0,0],\"control_background\":[0,0,0,0],\"button_background\":[174,212,116,0]},\"properties\":{\"ntp_background_alignment\":\"\",\"ntp_background_repeat\":\"no-repeat\"},\"tints\":{\"buttons\":[1,1,1],\"frame\":[-1,-1,-1],\"frame_inactive\":[-1,-1,0.75],\"frame_incognito\":[-1,0.2,0.35],\"frame_incognito_inactive\":[-1,0.3,0.6],\"background_tab\":[-1,0.5,0.75]}}}"
        # expect no JSONDecodeError
        load_manifest(manifest_raw)

    def is_manifest_valid(self):
        manifest = {
            "name": "Tweaks for TopMeteo.eu",
            "version": "2.3"
        }
        self.assertTrue(is_manifest_valid(manifest))

    def is_manifest_valid_false(self):
        manifest = []
        self.assertFalse(is_manifest_valid(manifest))

        manifest = manifest = {
            "a": "lhjsdil",
            "b": 2
        }
        self.assertFalse(is_manifest_valid(manifest))

        manifest = 'ahj'
        self.assertFalse(is_manifest_valid(manifest))

    def test_get_users_when_no_users(self):
        script_data = [["ahgdolfoafpejndlhnmojpkneiglfbea","https://lh3.googleusercontent.com/Yil7WIgpIgaXy_fI4jyiVqkcEcV60Vu7o6o56hrvqi84Tykyid3zMr9SWn_JB39VJfCqUXlSU2iQGuHFOVQ0-fdd4w","Personal-shop",None,None,None,"Personal-shop",None,None,None,None,["lifestyle/shopping",None,9],1],None,None,None,None,[[1,"https://lh3.googleusercontent.com/9PqRN3SW8KIz6c_tCVNFt0vlVPK1mImE3aD8EEQ2OjXMvHHfvwfUr9a7Gpbc04pgd48hWrqSVlGRA6ybqal94UU_"],[1,"https://lh3.googleusercontent.com/ZdlQafTES514T2wBPssLZuoF-9ZY_fH8cbuYquKBUCfRAxzdLdEYGEOivu4s-Xt1ks8_sakguEYzHmtgIVv800wZ1g"]],"Here is the personal app chrome extension where user can select category and search product based on product name, price and description.User can show the price of product and when click on product url then it redirect to official site and user can visit product page and can purchase it.",None,True,1,["pritesh066.rejoice@gmail.com",None,None,None,None,"personalshoprh"],None,None,"1.0.2",[1655793262,705000000],"176KiB",["English (United States)"],None,None,None,"{\n\"update_url\": \"https://clients2.google.com/service/update2/crx\",\n\n  \"name\": \"Personal-shop\",\n  \"version\": \"1.0.2\",\n  \"manifest_version\": 3,\n  \"description\": \"Personal-shop\",\n  \"icons\": {\n    \"512\": \"ps512.png\"\n  },\n  \"action\": {\n    \"default_icon\": \"ps192.png\",\n    \"default_popup\": \"popup.html\"\n  }\n}\n",True,[["agkcaldeglaadeknkclfbpdojhhclfej","https://lh3.googleusercontent.com/M1matt_KFDcWZdewumNAQ06LkeK0PUPj5e4ikQEhZ-19P1oHvQyTERDwkZPUUaMZpVj0ROCy5WagHew0cGgqOdci","Yandex Music Downloader",4.19939577039275,331,"https://lh3.googleusercontent.com/f3BzOHpLwLbHCv9Z7ReQCxWCVKpky-tntDhwIc4LCoBkb6dOvDJwzxOuVaedNBoXr6YqReRRyRMJ5noFNLZUoDcN_g","Загружай любимые треки без ограничений, с новым расширением для Yandex Music!",None,None,None,None,["make_chrome_yours/accessibility",None,20],1,None,100000],["ceibjdigmfbbgcpkkdpmjokkokklodmc","https://lh3.googleusercontent.com/arWmFDeKgOwpSAVgTKWs0jWxtNiq7NitlHLr6GBNOSf3eBRHRHv4-PsWslvtg5SS43fxwyML7ngcXbBx9_uF25o4xw","VK Styles - Themes for vk.com",4.898912647624994,19221,"https://lh3.googleusercontent.com/Lr70KQrBI5VhpCUiAuoetYhxzz6P4i56uJ0VnGiZlA-bk9vqnS8PyTOx8HazoAmgskLlemf8dO6BQikMtSskzqc_Zg","Install themes for Vkontakte in one click, or adjust colors, backgrounds, fonts and more as you prefer in the settings menu.",None,None,None,None,["lifestyle/social",None,13],1,None,500000],["pphgdbgldlmicfdkhondlafkiomnelnk","https://lh3.googleusercontent.com/1vIxENw1YxJj9OvIuhaIIMg_7n8QaMiFkygj_4cGJKEapDgUwDIYEVlchfK20vuv7lmo-El1AMRDng_MZIDZmmvfeA","1ClickVPN Proxy for Chrome",4.607142857142857,112,"https://lh3.googleusercontent.com/lZSEx7-GdDqpNwz3HFlTCdkWUHp-z4BMbd2-RTRljNqm_Zid-Y70YaDivaU64s-fIlwI9NtlF1K9-LhAyN7Z6TKunl0","Get the best VPN access to any website, and unblock the content you want with 1ClickVPN",None,None,True,None,["make_chrome_yours/privacy",None,22],1,True,20000],["gjkjjhgjcalgefcimahpbacihndicccn","https://lh3.googleusercontent.com/BqMwM6-4V8d2n-K38Mx5W39hBKC7dDfXdKGwGj60_97haAUB0gi6jr7gVDpqzx7mpBaUpTIOHSYmeUEKlMHaOG20","Remove Ads from Photopea",4.674418604651163,43,None,"Hides the ads on Photopea",None,None,True,None,["productivity/workflow",None,4],1,True,10000],["gdlobabjmjnkkiajibjhembfpgpenbep","https://lh3.googleusercontent.com/5p5w3Dw7TPpKtSa7iT-zyiti8AfXO1WYknaaM9_YBXMdaWOzuGmoanUGQpXy-Oq3YpeNmj_xMx4JCMrSZ5Pc7KSXTg","Document GPS",5,26,"https://lh3.googleusercontent.com/jwuoSZ3q7UoOrzGEIfj53x1hvrCfWfMrzz6eejuY6Gf_zAnx1sUC9NHQtbDGJKcDnXIvBFjQ0Z6NPP2Mz1qX0qRiDg","Track, modify and delete already sent attachments using blockchain-based security.",None,None,None,None,["productivity/workflow",None,4],1,None,1000],["hkghghbnihliadkabmlcmcgmffllglin","https://lh3.googleusercontent.com/ElWYErbQL1s9GgZMxVlG8NvOs5Ky19TdGEd0YoP2_1sS3JGwF3hLiIm3dM1f9-4M8Io__pBrd3DSSRbRq34mITCl","X-Forwarded-For Header",4.611111111111111,18,None,"This extension allows you quickly to set the X-Forwarded-For HTTP Header",None,None,None,None,["productivity/developer",None,7],1,None,60000],["gbcfdjgipmpinkahpiambcikjkijimhi","https://lh3.googleusercontent.com/PBpQ4hZ8hXR0WLg0aAcq66Ibtx3cpinWNz1mVjctoPQJHFUgarv3YuAcUQoTN-RZaqlThqdzWPtCD4FuQnbDBq3ULQ","AI Content Detector for ChatGPT - Sapling.ai",5,4,"https://lh3.googleusercontent.com/AaiWNRQ9N3EyNKOF_RkDCbBO3myvFMhTZPDYs76XozjVeQdtdQpd2v7WLrjbqWw04xdfJE4VOzYHqAoeqErmyuidjNA","Quickly check if any content was AI generated, and make sure your writing isn't!",None,None,None,None,["productivity/tools",None,5],1,None,8000],["nfdfiepdkbnoanddpianalelglmfooik","https://lh3.googleusercontent.com/eS5EsB_xnhkQG3z1opGGqe2dI5w7XaWzyHy7vhxY8mwu5EnlyguBxCaLvpAKUAkbolbfQJGUzsm9o-hmYdR4g-_opx0","Ears: Bass Boost, EQ Any Audio!",4.519390979603562,3481,"https://lh3.googleusercontent.com/PwGutKAOQzMR0LQa9dafQr950l3_WOI4VSyOrf0pRRzynIidddHrdr_6WtYQQXZupvB9dD-1_asVtzx3OjumV2osAg","EQ any audio you find on the web, live! Crank the bass, dim the highs, up the vocals: all with Ears!",None,None,None,None,["lifestyle/fun",None,18],1,None,500000],["indpljpndioefdhmhafebdcddigbogbn","https://lh3.googleusercontent.com/L9h1d4bPmD4Ce3NU0cqncC2fSJ39jYCd8HzkdnvDq7pFy8cMpsJ3SrSYQiIlTbmgxsxn8vlvlfrdAmxdkhckLdXoYbM","Privacy Tweaks",3.727272727272727,11,"https://lh3.googleusercontent.com/26NBKdCvBRs7eexla8bEhVtHudV86eKMHjkoYyWKWlSgusa-Lr4y5Nom8p_hDt3_lqJ8i6YZ4ys1sIWWCX7XDjnL","Improve your online privacy with few tweaks via toolbar popup!",None,None,True,None,["productivity/tools",None,5],1,True,5000],["gaidoampbkcknofoejhnhbhbhhifgdop","https://lh3.googleusercontent.com/QmodvthOtzLsJ1Lb-oSeV15g1hlpM3v4EjYIumirYMO3au_I6dyzuWXEdKUppwsWTdlsClbDQ6VHq3a-0FOMpSDfJQ","Censor Tracker – Proxy for Privacy \u0026 Security",3.97265625,256,"https://lh3.googleusercontent.com/BUWTbYwuu6At7TVQldy1FB5ug48BZvauNRf91nu2FDgQ1KDw8oTUKVLz4NcnrTot7NwE9g_909kUXdqa87LjFMGNJQ","A censorship circumvention extension. Stay safe online with our proxy extension.","censortracker.org",True,None,None,["make_chrome_yours/privacy",None,22],1,None,100000,True],["gjakohbhfclfjmhhlenfdkldieofkpjl","https://lh3.googleusercontent.com/WlMo9C2-edo1vPKoSLs6mDBnZhEM5a_pRGV8MBe6PS89eeel5Ev4kkxlzs_mDHv__rFaunR3c1Vu2rOS_YUJNeDiZtc","IPRoyal Proxy Manager",4.4375,32,None,"IPRoyal Proxy Manager",None,None,None,None,["productivity/developer",None,7],1,None,20000],["gmpconpjckclhemcaeinfemgpaelkfld","https://lh3.googleusercontent.com/UvJWLIPjBYjx0TEKTwum2Dm0ClTBRFfGLnJnM2GMRKwPFVSxjcM6yLbH0zfFQZu7JzmDtGG4ypNPMGAuT4TXafqlvQ","Sound Booster",5,10,"https://lh3.googleusercontent.com/_CYG7Sy3QLt_dMgiFRHmQgPmirGpse5Jh95ifRSveSHCmIQxt0m0qK-Vw6HlWx2wljbm3zoEUn25pac_GzpY6wSUGA","Customize music file by volume booster tool. Allow you to increase the volume of your audio and video files","volumebooster.cc",None,None,None,["make_chrome_yours/accessibility",None,20],1,None,2000,True]],None,None,None,None,"88",None,1,None,None,None,None,None,None,True,3]
        self.assertEqual(get_users(script_data), 0)
